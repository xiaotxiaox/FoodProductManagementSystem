{"remainingRequest":"E:\\ConstructionConsultationSystem\\Frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ConstructionConsultationSystem\\Frontend\\src\\views\\detail\\RelatedCompany.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\ConstructionConsultationSystem\\Frontend\\src\\views\\detail\\RelatedCompany.vue","mtime":1555501455735},{"path":"E:\\ConstructionConsultationSystem\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ConstructionConsultationSystem\\Frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\ConstructionConsultationSystem\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ConstructionConsultationSystem\\Frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport api from '../../api/detail'\r\n  const columns = [{\r\n    title: '单位',\r\n    dataIndex: 'company',\r\n    width: '20%',\r\n    scopedSlots: { customRender: 'company' }\r\n  }, {\r\n    title: '姓名',\r\n    dataIndex: 'name',\r\n    width: '10%',\r\n    scopedSlots: { customRender: 'name' }\r\n  }, {\r\n    title: '岗位',\r\n    dataIndex: 'job',\r\n    width: '10%',\r\n    scopedSlots: { customRender: 'job' }\r\n  }, {\r\n    title: '邮箱',\r\n    dataIndex: 'email',\r\n    width: '20%',\r\n    scopedSlots: { customRender: 'email' }\r\n  },{\r\n    title: '联系电话',\r\n    dataIndex: 'telephone',\r\n    width: '15%',\r\n    scopedSlots: { customRender: 'telephone' }\r\n  },{\r\n    title: '备注',\r\n    dataIndex: 'note',\r\n    width: '15%',\r\n    scopedSlots: { customRender: 'note' }\r\n  },{\r\n  title: '编辑',\r\n  dataIndex: 'operation',\r\n  scopedSlots: { customRender: 'operation' },\r\n}\r\n  ]\r\n\r\n  const data = []\r\n  for (let i = 0; i < 5; i++) {\r\n    data.push({\r\n      key: i.toString(),\r\n      company: `Company ${i}`,\r\n      name: '*****',\r\n      job:'经理',\r\n      email:'1234567@163.com',\r\n      telephone:'12345678909',\r\n      note: `12345678`\r\n    })\r\n  }\r\n  export default {\r\n    name: 'RelatedCompany',\r\n    data () {\r\n      this.cacheData = data.map(item => ({ ...item }))\r\n      return {\r\n        params: {\r\n        search: '',\r\n        page: 1,\r\n        ordering: '-company'\r\n      },\r\n        count:5,\r\n        data,\r\n        columns\r\n      }\r\n    },\r\n    methods: {\r\n      handleSearch () {\r\n      this.getData()\r\n    },\r\n    handleClearParams () {\r\n      this.params.ordering = '-company'\r\n      this.params.search = ''\r\n      this.params.page = 1\r\n      this.getData()\r\n    },\r\n      getData () {\r\n      api.getAddressList(this.params).then(data => {\r\n        this.data = data\r\n      })\r\n    },\r\n      handleAdd () {\r\n      const { count, data } = this\r\n      var dataNew = {\r\n          key: count,\r\n          company: ``,\r\n          name: '',\r\n          job:'',\r\n          email:'',\r\n          telephone:'',\r\n          note: ``\r\n      }\r\n      this.data = [dataNew,...data]\r\n      this.count = count + 1\r\n        const newData = [...this.data]\r\n        if (dataNew) {\r\n          dataNew.editable = true\r\n          this.data = newData\r\n        }\r\n    },\r\n      onDelete (key) {\r\n      const dataSource = [...this.data]\r\n      this.data = dataSource.filter(item => item.key !== key)\r\n    },\r\n      handleChange (value, key, column) {\r\n        const newData = [...this.data]\r\n        const target = newData.filter(item => key === item.key)[0]\r\n        if (target) {\r\n          target[column] = value\r\n          this.data = newData\r\n        }\r\n      },\r\n      edit (key) {\r\n        const newData = [...this.data]\r\n        const target = newData.filter(item => key === item.key)[0]\r\n        if (target) {\r\n          target.editable = true\r\n          this.data = newData\r\n        }\r\n      },\r\n      save (key) {\r\n        const newData = [...this.data]\r\n        const target = newData.filter(item => key === item.key)[0]\r\n        if (target) {\r\n          delete target.editable\r\n          this.data = newData\r\n          this.cacheData = newData.map(item => ({ ...item }))\r\n        }\r\n      },\r\n      cancel (key) {\r\n        const newData = [...this.data]\r\n        const target = newData.filter(item => key === item.key)[0]\r\n        if (target) {\r\n          Object.assign(target, this.cacheData.filter(item => key === item.key)[0])\r\n          delete target.editable\r\n          this.data = newData\r\n        }\r\n      }\r\n    }\r\n  }\r\n",{"version":3,"sources":["RelatedCompany.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RelatedCompany.vue","sourceRoot":"src/views/detail","sourcesContent":["<template>\r\n  <a-card>\r\n    <a-input-group class=\"tool\">\r\n        <a-row :gutter=\"6\">\r\n          <a-col\r\n            class=\"item\"\r\n            :xs=\"{ span: 24 }\"\r\n            :sm=\"{ span: 8 }\"\r\n            :xl=\"{ span: 4 }\">\r\n            <a-select\r\n              v-model=\"params.ordering\"\r\n              style=\"width: 100%\"\r\n              @change=\"getData\">\r\n              <a-select-option value=\"\">排序</a-select-option>\r\n              <a-select-option value=\"company\">单位正排序</a-select-option>\r\n              <a-select-option value=\"-company\">单位倒排序</a-select-option>\r\n              <a-select-option value=\"name\">姓名正排序</a-select-option>\r\n              <a-select-option value=\"-name\">姓名倒排序</a-select-option>\r\n            </a-select>\r\n          </a-col>\r\n          <a-col\r\n            class=\"item\"\r\n            :xs=\"{ span: 24 }\"\r\n            :sm=\"{ span: 8  }\"\r\n            :xl=\"{ span: 4 }\">\r\n            <a-input\r\n              v-model=\"params.search\"\r\n              style=\"width: 100%\"\r\n              placeholder=\"单位，姓名，岗位\">\r\n            </a-input>\r\n          </a-col>\r\n          <a-col\r\n            class=\"item\"\r\n            :xs=\"{ span: 12 }\"\r\n            :sm=\"{ span: 8 }\"\r\n            :xl=\"{ span: 4 }\">\r\n            <a-button\r\n              style=\"width: 100%\"\r\n              icon=\"search\"\r\n              @click=\"handleSearch\">\r\n              搜索\r\n            </a-button>\r\n          </a-col>\r\n          <a-col\r\n            class=\"item\"\r\n            :xs=\"{ span: 12 }\"\r\n            :sm=\"{ span: 8 }\"\r\n            :xl=\"{ span: 4 }\">\r\n            <a-button\r\n              style=\"width: 100%\"\r\n              icon=\"delete\"\r\n              @click=\"handleClearParams\">\r\n              重置\r\n            </a-button>\r\n          </a-col>\r\n           <a-col\r\n            class=\"item\"\r\n            :xs=\"{ span: 24 }\"\r\n            :sm=\"{ span: 8 ,offset:8}\"\r\n            :xl=\"{ span: 4,offset:4 }\"\r\n            >\r\n            <a-button\r\n              type=\"primary\"\r\n              icon=\"plus\"\r\n              style=\"width: 100%\"\r\n              class=\"editable-add-btn\"\r\n              @click=\"handleAdd\">\r\n              添加相关单位\r\n            </a-button>\r\n          </a-col>\r\n        </a-row>\r\n    </a-input-group>\r\n    <a-table :columns=\"columns\" :dataSource=\"data\">\r\n      <template v-for=\"col in ['company', 'name', 'job','email','telephone','note']\" :slot=\"col\" slot-scope=\"text, record, index\">\r\n        <div :key=\"col\">\r\n          <a-input\r\n            v-if=\"record.editable\"\r\n            style=\"margin: -5px 0\"\r\n            :value=\"text\"\r\n            @change=\"e => handleChange(e.target.value, record.key, col)\"\r\n          />\r\n          <template v-else>{{text}}</template>\r\n        </div>\r\n      </template>\r\n      <template slot=\"operation\" slot-scope=\"text, record, index\">\r\n        <div class='editable-row-operations'>\r\n        <span v-if=\"record.editable\">\r\n          <a @click=\"() => save(record.key)\">保存</a><br/>\r\n          <a-popconfirm title='确认取消吗?' @confirm=\"() => cancel(record.key)\">\r\n            <a>取消</a>\r\n          </a-popconfirm><br/>\r\n          <a-popconfirm\r\n            v-if=\"data.length\"\r\n            title=\"确认删除吗?\"\r\n            @confirm=\"() => onDelete(record.key)\">\r\n            <a href=\"javascript:;\">删除</a>\r\n        </a-popconfirm>\r\n        </span>\r\n          <span v-else>\r\n          <a @click=\"() => edit(record.key)\">编辑</a>\r\n        </span>\r\n        </div>\r\n      </template>\r\n    </a-table>\r\n  </a-card>\r\n</template>\r\n\r\n<script>\r\nimport api from '../../api/detail'\r\n  const columns = [{\r\n    title: '单位',\r\n    dataIndex: 'company',\r\n    width: '20%',\r\n    scopedSlots: { customRender: 'company' }\r\n  }, {\r\n    title: '姓名',\r\n    dataIndex: 'name',\r\n    width: '10%',\r\n    scopedSlots: { customRender: 'name' }\r\n  }, {\r\n    title: '岗位',\r\n    dataIndex: 'job',\r\n    width: '10%',\r\n    scopedSlots: { customRender: 'job' }\r\n  }, {\r\n    title: '邮箱',\r\n    dataIndex: 'email',\r\n    width: '20%',\r\n    scopedSlots: { customRender: 'email' }\r\n  },{\r\n    title: '联系电话',\r\n    dataIndex: 'telephone',\r\n    width: '15%',\r\n    scopedSlots: { customRender: 'telephone' }\r\n  },{\r\n    title: '备注',\r\n    dataIndex: 'note',\r\n    width: '15%',\r\n    scopedSlots: { customRender: 'note' }\r\n  },{\r\n  title: '编辑',\r\n  dataIndex: 'operation',\r\n  scopedSlots: { customRender: 'operation' },\r\n}\r\n  ]\r\n\r\n  const data = []\r\n  for (let i = 0; i < 5; i++) {\r\n    data.push({\r\n      key: i.toString(),\r\n      company: `Company ${i}`,\r\n      name: '*****',\r\n      job:'经理',\r\n      email:'1234567@163.com',\r\n      telephone:'12345678909',\r\n      note: `12345678`\r\n    })\r\n  }\r\n  export default {\r\n    name: 'RelatedCompany',\r\n    data () {\r\n      this.cacheData = data.map(item => ({ ...item }))\r\n      return {\r\n        params: {\r\n        search: '',\r\n        page: 1,\r\n        ordering: '-company'\r\n      },\r\n        count:5,\r\n        data,\r\n        columns\r\n      }\r\n    },\r\n    methods: {\r\n      handleSearch () {\r\n      this.getData()\r\n    },\r\n    handleClearParams () {\r\n      this.params.ordering = '-company'\r\n      this.params.search = ''\r\n      this.params.page = 1\r\n      this.getData()\r\n    },\r\n      getData () {\r\n      api.getAddressList(this.params).then(data => {\r\n        this.data = data\r\n      })\r\n    },\r\n      handleAdd () {\r\n      const { count, data } = this\r\n      var dataNew = {\r\n          key: count,\r\n          company: ``,\r\n          name: '',\r\n          job:'',\r\n          email:'',\r\n          telephone:'',\r\n          note: ``\r\n      }\r\n      this.data = [dataNew,...data]\r\n      this.count = count + 1\r\n        const newData = [...this.data]\r\n        if (dataNew) {\r\n          dataNew.editable = true\r\n          this.data = newData\r\n        }\r\n    },\r\n      onDelete (key) {\r\n      const dataSource = [...this.data]\r\n      this.data = dataSource.filter(item => item.key !== key)\r\n    },\r\n      handleChange (value, key, column) {\r\n        const newData = [...this.data]\r\n        const target = newData.filter(item => key === item.key)[0]\r\n        if (target) {\r\n          target[column] = value\r\n          this.data = newData\r\n        }\r\n      },\r\n      edit (key) {\r\n        const newData = [...this.data]\r\n        const target = newData.filter(item => key === item.key)[0]\r\n        if (target) {\r\n          target.editable = true\r\n          this.data = newData\r\n        }\r\n      },\r\n      save (key) {\r\n        const newData = [...this.data]\r\n        const target = newData.filter(item => key === item.key)[0]\r\n        if (target) {\r\n          delete target.editable\r\n          this.data = newData\r\n          this.cacheData = newData.map(item => ({ ...item }))\r\n        }\r\n      },\r\n      cancel (key) {\r\n        const newData = [...this.data]\r\n        const target = newData.filter(item => key === item.key)[0]\r\n        if (target) {\r\n          Object.assign(target, this.cacheData.filter(item => key === item.key)[0])\r\n          delete target.editable\r\n          this.data = newData\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n    .tool {\r\n      .item {\r\n        margin-bottom: 16px;\r\n      }\r\n    }\r\n</style>"]}]}