{"remainingRequest":"E:\\ConstructionConsultationSystem\\Frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ConstructionConsultationSystem\\Frontend\\src\\views\\implement\\invest\\invest_tree\\invest_tree.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\ConstructionConsultationSystem\\Frontend\\src\\views\\implement\\invest\\invest_tree\\invest_tree.vue","mtime":1571485952602},{"path":"E:\\ConstructionConsultationSystem\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ConstructionConsultationSystem\\Frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\ConstructionConsultationSystem\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ConstructionConsultationSystem\\Frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport api from '../../../../api/implement'\nimport TreePlanTotalModal from './components/TreePlanTotalModal'\nimport TreeActualBidModal from './components/TreeActualBidModal'\nimport TreeActualDesignModal from './components/TreeActualDesignModal'\nimport TreeActualConsultModal from './components/TreeActualConsultModal'\nimport TreeActualSupervisorModal from './components/TreeActualSupervisorModal'\nimport TreeActualGcontractModal from './components/TreeActualGcontractModal'\nimport TreeActualScontractModal from './components/TreeActualScontractModal'\nimport TreeActualContructModal from './components/TreeActualContructModal'\nimport TreeActualServiceModal from './components/TreeActualServiceModal'\nimport TreeActualTotalModal from './components/TreeActualTotalModal'\nimport TreeActualBeforeModal from './components/TreeActualBeforeModal'\nimport TreeActualOthersModal from './components/TreeActualOthersModal'\nimport TreePlanModal from './components/TreePlanModal'\n\nimport getBoundingClientRect from 'vue-task-node/src/lib/components/node/node'\nconst columns = [\n  {\n    title: '总计划',\n    dataIndex: 'allPaidTotal',\n    width: '25%',\n    align: 'center'\n  },\n  {\n    title: '咨询服务',\n    dataIndex: 'consultServicePaidTotal',\n    width: '25%',\n    align: 'center'\n  },\n  {\n    title: '施工',\n    dataIndex: 'constructionPaidTotal',\n    width: '25%',\n    align: 'center'\n  },\n   {\n    title: '其他',\n    dataIndex: 'otherPaidTotal',\n    width: '25%',\n    align: 'center'\n  },\n   {\n    title: '招标',\n    dataIndex: 'bidPaidTotal',\n    width: '25%',\n    align: 'center'\n  },\n   {\n    title: '设计',\n    dataIndex: 'designPaidTotal',\n    width: '25%',\n    align: 'center'\n  },\n   {\n    title: '咨询',\n    dataIndex: 'consultationPaidTotal',\n    width: '25%',\n    align: 'center'\n  },\n   {\n    title: '监理',\n    dataIndex: 'supervisorPaidTotal',\n    width: '25%',\n    align: 'center'\n  },\n   {\n    title: '总承包',\n    dataIndex: 'generalContractPaidTotal',\n    width: '25%',\n    align: 'center'\n  },\n   {\n    title: '分承包',\n    dataIndex: 'subcontractPaidTotal',\n    width: '25%',\n    align: 'center'\n  },\n  {\n    title: '编辑',\n    dataIndex: 'operation',\n    scopedSlots: {customRender: 'operation'},\n    align: 'center'\n  }\n]\nexport default {\n  name: 'invest_tree',\n  components: {\n    TreePlanTotalModal,\n    TreeActualBidModal,\n    TreeActualDesignModal,\n    TreeActualConsultModal,\n    TreeActualSupervisorModal,\n    TreeActualGcontractModal,\n    TreeActualScontractModal,\n    TreeActualContructModal,\n    TreeActualServiceModal,\n    TreeActualTotalModal,\n    TreeActualBeforeModal,\n    TreeActualOthersModal,\n    TreePlanModal,\n    getBoundingClientRect\n},\n  props: {\n    id: Number\n},\n  data () {\n    return {\n      columns,\n      project_id: this.id,\n      ini_config: {\n        lineType: 'Q',\n        isDotted: false,\n        scaling: {\n          ZoomX: 1,\n          ZoomY: 1\n        }\n      },\n      paths:[],\n      // paths: [\n      //   {\n      //     dotted: true,\n      //     ptype: 'Q',\n      //     startPort: 'node1_1',\n      //     endPort: 'node2_1'\n      //   },\n      //   {\n      //     dotted: true,\n      //     ptype: 'L',\n      //     startPort: 'node1_2',\n      //     endPort: 'node3_1'\n      //   }, {\n      //     dotted: false,\n      //     ptype: 'Q',\n      //     startPort: 'node1_3',\n      //     endPort: 'node4_1'\n      //   }, {\n      //     dotted: false,\n      //     ptype: 'L',\n      //     startPort: 'node1_4',\n      //     endPort: 'node5_1'\n      //   }],\n      //总计划\n      node1: {\n        id: 'node1',\n        name: '总计划',\n        positionX: 500,\n        positionY: 100,\n        state: 'mistake',\n        outPorts: [\n          {\n            id: 'node1_1'\n          },\n          {\n            id: 'node1_2'\n          },\n          {\n            id: 'node1_3'\n          },\n          {\n            id: 'node1_4'\n          },\n        ]\n\n      },\n      //前期手续\n      node2: {\n        id: 'node2',\n        name: '前期手续',\n        positionX: 100,\n        positionY: 200,\n        state: 'mistake',\n        inPorts: [\n          {\n            id: 'node2_1',\n            isConnected: true\n          }\n        ]\n\n      },\n      //咨询服务\n       node3: {\n        id: 'node3',\n        name: '咨询服务',\n        positionX: 350,\n        positionY: 200,\n        state: 'mistake',\n        inPorts: [\n          {\n            id: 'node3_1',\n            isConnected: true\n          }\n        ],\n         outPorts: [\n          {\n            id: 'node3_2'\n          },\n          {\n            id: 'node3_3'\n          },\n          {\n            id: 'node3_4'\n          },\n          {\n            id: 'node3_5'\n          },\n        ]\n\n      },\n      //施工\n       node4: {\n        id: 'node4',\n        name: '施工',\n        positionX: 600,\n        positionY: 200,\n        state: 'mistake',\n        inPorts: [\n          {\n            id: 'node4_1',\n            isConnected: true\n          }\n        ],\n         outPorts: [\n          {\n            id: 'node4_2'\n          },\n          {\n            id: 'node4_3'\n          }\n        ]\n\n      },\n      //其他\n      node5: {\n        id: 'node5',\n        name: '其他',\n        positionX: 850,\n        positionY: 200,\n        state: 'mistake',\n        inPorts: [\n          {\n            id: 'node4_1',\n            isConnected: true\n          }\n        ]\n\n      },\n      //咨询服务----招标\n      node6: {\n        id: 'node6',\n        name: '招标',\n        positionX: 0,\n        positionY: 300,\n        state: 'mistake',\n        inPorts: [\n          {\n            id: 'node6_1',\n            isConnected: true\n          }\n        ]\n\n      },\n       //咨询服务----设计\n      node7: {\n        id: 'node7',\n        name: '设计',\n        positionX: 250,\n        positionY: 300,\n        state: 'mistake',\n        inPorts: [\n          {\n            id: 'node7_1',\n            isConnected: true\n          }\n        ]\n\n      },\n      //咨询服务----咨询\n      node8: {\n        id: 'node8',\n        name: '咨询',\n        positionX: 500,\n        positionY: 300,\n        state: 'mistake',\n        inPorts: [\n          {\n            id: 'node8_1',\n            isConnected: true\n          }\n        ]\n\n      },\n      //咨询服务----监理\n      node9: {\n        id: 'node9',\n        name: '监理',\n        positionX:750,\n        positionY: 300,\n        state: 'mistake',\n        inPorts: [\n          {\n            id: 'node9_1',\n            isConnected: true\n          }\n        ]\n\n      },\n       //施工----总承包\n      node10: {\n        id: 'node10',\n        name: '总承包',\n        positionX: 1000,\n        positionY: 300,\n        state: 'mistake',\n        inPorts: [\n          {\n            id: 'node10_1',\n            isConnected: true\n          }\n        ]\n\n      },\n       //施工----分承包\n      node11: {\n        id: 'node11',\n        name: '分承包',\n        positionX: 1250,\n        positionY: 300,\n        state: 'mistake',\n        inPorts: [\n          {\n            id: 'node11_1',\n            isConnected: true\n          }\n        ]\n\n      },\n      //路径1：总计划--前期手续 Mxy:x+40,y+0;Txy:x+250,y+0\n      portData1: {\n        ptype: 'Q',\n        dotted: false,\n        Mxy: {\n          x: 535,\n          y: 130\n        },\n        Txy: {\n          x: 190,\n          y: 200\n        },\n        startPort: 'node1',\n        endPort: 'node2'\n      },\n      //路径2：总计划--咨询服务\n      portData2: {\n        ptype: 'Q',\n        dotted: false,\n        Mxy: {\n          x: 575,\n          y: 130\n        },\n        Txy: {\n          x: 440,\n          y: 200\n        },\n        startPort: 'node1',\n        endPort: 'node2'\n      },\n      //路径3：总计划----施工\n      portData3: {\n        ptype: 'Q',\n        dotted: false,\n        Mxy: {\n          x: 612,\n          y: 130\n        },\n        Txy: {\n          x: 690,\n          y: 200\n        },\n        startPort: 'node1',\n        endPort: 'node2'\n      },\n      //路径4：总计划---其他\n      portData4: {\n        ptype: 'Q',\n        dotted: false,\n        Mxy: {\n          x: 648,\n          y: 130\n        },\n        Txy: {\n          x: 940,\n          y: 200\n        },\n        startPort: 'node1',\n        endPort: 'node2'\n      },\n      //路径5：咨询服务---招标 Mxy:x+40,y+30;Txy:x+250,y+0\n      portData5: {\n        ptype: 'Q',\n        dotted: false,\n        Mxy: {\n          x: 385,\n          y: 230\n        },\n        Txy: {\n          x: 90,\n          y: 300\n        },\n        startPort: 'node1',\n        endPort: 'node2'\n      },\n      //路径6：咨询服务----设计\n      portData6: {\n        ptype: 'Q',\n        dotted: false,\n        Mxy: {\n          x: 425,\n          y: 230\n        },\n        Txy: {\n          x: 340,\n          y: 300\n        },\n        startPort: 'node1',\n        endPort: 'node2'\n      },\n      //路径7：咨询服务----咨询\n      portData7: {\n        ptype: 'Q',\n        dotted: false,\n        Mxy: {\n          x: 460,\n          y: 230\n        },\n        Txy: {\n          x: 590,\n          y: 300\n        },\n        startPort: 'node1',\n        endPort: 'node2'\n      },\n      //路径8：咨询服务----监理\n      portData8: {\n        ptype: 'Q',\n        dotted: false,\n        Mxy: {\n          x: 500,\n          y: 230\n        },\n        Txy: {\n          x: 840,\n          y: 300\n        },\n        startPort: 'node1',\n        endPort: 'node2'\n      },\n      //路径9：施工----总承包\n      portData9: {\n        ptype: 'Q',\n        dotted: false,\n        Mxy: {\n          x: 660,\n          y: 230\n        },\n        Txy: {\n          x: 1090,\n          y: 300\n        },\n        startPort: 'node1',\n        endPort: 'node2'\n      },\n      //路径10：施工----分承包\n      portData10: {\n        ptype: 'Q',\n        dotted: false,\n        Mxy: {\n          x: 720,\n          y: 230\n        },\n        Txy: {\n          x: 1340,\n          y: 300\n        },\n        startPort: 'node1',\n        endPort: 'node2'\n      },\n\n      //左击弹窗：计划花费（手动添加）\n      modal1: {\n        record: null,\n        visible: false,\n        type: '1',\n        tree_view_id: this.id\n      },\n      modal3: {\n      record: null,\n      visible: false,\n      type: '1',\n      tree_id: this.id\n    },\n      //右击弹窗：实际花费（抓取数据）\n       modal2: {\n      record: null,\n      visible: false,\n      type: '1',\n      tree_actual_id: this.id\n    },\n       modal4: {\n      record: null,\n      visible: false,\n      type: '1',\n      tree_actual_id: this.id\n    },\n      modal5: {\n      record: null,\n      visible: false,\n      type: '1',\n      tree_actual_id: this.id\n    },\n       modal6: {\n      record: null,\n      visible: false,\n      type: '1',\n      tree_actual_id: this.id\n    },\n    modal7: {\n      record: null,\n      visible: false,\n      type: '1',\n      tree_actual_id: this.id\n    },\n      modal8: {\n      record: null,\n      visible: false,\n      type: '1',\n      tree_actual_id: this.id\n    },\n      modal9: {\n      record: null,\n      visible: false,\n      type: '1',\n      tree_actual_id: this.id\n    },\n      modal10: {\n      record: null,\n      visible: false,\n      type: '1',\n      tree_actual_id: this.id\n    },\n      modal11: {\n        record: null,\n        visible: false,\n        type: '1',\n        tree_actual_id: this.id\n      },\n       modal12: {\n        record: null,\n        visible: false,\n        type: '1',\n        tree_actual_id: this.id\n      },\n      planModal:{\n        record: null,\n        visible: false,\n        type: '1',\n        tree_view_id: this.id\n      },\n      process: {},\n      processList: [],\n      applicationList: [],\n      trees:{},\n      treeList:[]\n\n    }\n  },\n  mounted () {\n    this.getData()\n  },\n  methods: {\n     getData () {\n      //  api.getInvestProcessList(this.$store.getters.projectSelected.id)\n      // .then(data => {\n      //   console.log(data)\n      //   this.processList = data\n      // })\n    api.getTreeList(this.$store.getters.projectSelected.id)\n      .then(data => {\n        console.log(data)\n        this.treeList = data\n      }),\n     api.getTrees(this.id)\n      .then(data => {\n        this.trees = data\n      })\n\n    // api.getInvestProcess(this.id)\n    //   .then(data => {\n    //     console.log(data)\n    //     this.process = data\n    //   })\n\n  },\n    onMouse: function (event, work_id) {\n      console.log('鼠标右击工作区事件！', event, work_id)\n    },\n    onAddNodeModel (event, node) {\n      console.log('添加节点', event.clientX, event.clientY, node)\n      let newNode = {}\n      newNode = node\n      newNode.id = 'node' + Math.floor(Math.random() * 100)\n      newNode.positionX = node.positionX - 90 // -15 -90 定位到节点的终点\n      newNode.positionY = node.positionY - 15\n      newNode.outPorts = [{\n        id: newNode.id + '_' + Math.floor(Math.random() * 10)\n       }]\n      newNode.inPorts = []\n      this.nodes.push(newNode)\n   },\n    //节点左键点击事件\n     selectlMethod: function (event, data, node) {\n      console.log('selectlMethod', 'on-select', '节点左键点击事件', event, data, node)\n    },\n    //总计划\n    selectlTotalMethod(record) {\n      console.log('selectlMethod', 'on-select', '节点左键点击事件')\n      this.modal1.type = 'plan_total'\n      this.modal1.record = record\n      this.modal1.visible = true\n      console.log(record)\n    },\n    handleClose1P2() {\n    this.modal1.type = ''\n    this.modal1.record = null\n    this.modal1.visible = false\n  },\n    //前期手续\n    selectlBeforeMethod: function (event, data, node) {\n      console.log('selectlMethod', 'on-select', '节点左键点击事件', event, data, node)\n      this.modal3.type = 'Lbefore'\n      this.modal3.record = null\n      this.modal3.visible = true\n      this.getData()\n    },\n    handleClose3 () {\n    this.modal3.type = ''\n    this.modal3.record = null\n    this.modal3.visible = false\n  },\n    //节点右击事件\n    //节点右击事件\n    mouseNodeMenu: function (event, node) {\n      console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\n      this.getData()\n    },\n    //总计划\n    mouseTotalMenu: function (event, node) {\n      console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\n      this.modal2.type = 'tree_total'\n      this.modal2.record = null\n      this.modal2.visible = true\n      this.getData()\n    },\n    handleClose2 () {\n      this.modal2.type = ''\n      this.modal2.record = null\n      this.modal2.visible = false\n  },\n    //咨询服务：招标+设计+监理+咨询\n    mouseServiceMenu: function (event, node) {\n      console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\n      this.modal4.type = 'tree_service'\n      this.modal4.record = null\n      this.modal4.visible = true\n      this.getData()\n    },\n    handleClose4 () {\n      this.modal4.type = ''\n      this.modal4.record = null\n      this.modal4.visible = false\n  },\n    //施工：总承包+分承包\n    mouseContructMenu: function (event, node) {\n      console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\n      this.modal5.type = 'tree_construct'\n      this.modal5.record = null\n      this.modal5.visible = true\n      this.getData()\n    },\n    handleClose5 () {\n      this.modal5.type = ''\n      this.modal5.record = null\n      this.modal5.visible = false\n  },\n     //其他\n    mouseOthersMenu: function (event, node) {\n      console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\n      this.modal6.type = 'tree_others'\n      this.modal6.record = null\n      this.modal6.visible = true\n      this.getData()\n    },\n    handleClose6 () {\n      this.modal6.type = ''\n      this.modal6.record = null\n      this.modal6.visible = false\n  },\n    //招标\n    mouseBidMenu: function (event, node) {\n      console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\n      this.modal7.type = 'tree_bid'\n      this.modal7.record = null\n      this.modal7.visible = true\n      this.getData()\n    },\n    handleClose7 () {\n      this.modal7.type = ''\n      this.modal7.record = null\n      this.modal7.visible = false\n  },\n    //设计\n    mouseDesignMenu: function (event, node) {\n      console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\n      this.modal8.type = 'tree_design'\n      this.modal8.record = null\n      this.modal8.visible = true\n      this.getData()\n    },\n    handleClose8 () {\n      this.modal8.type = ''\n      this.modal8.record = null\n      this.modal8.visible = false\n  },\n    //咨询\n     mouseConsultMenu: function (event, node) {\n      console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\n      this.modal9.type = 'tree_consult'\n      this.modal9.record = null\n      this.modal9.visible = true\n      this.getData()\n    },\n    handleClose9 () {\n      this.modal9.type = ''\n      this.modal9.record = null\n      this.modal9.visible = false\n  },\n    //监理\n    mouseSupervisorMenu: function (event, node) {\n      console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\n      this.modal10.type = 'tree_supervisor'\n      this.modal10.record = null\n      this.modal10.visible = true\n      this.getData()\n    },\n    handleClose10 () {\n      this.modal10.type = ''\n      this.modal10.record = null\n      this.modal10.visible = false\n  },\n    //总承包\n    mouseGcontractMenu: function (event, node) {\n      console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\n      this.modal11.type = 'tree_g_contract'\n      this.modal11.record = null\n      this.modal11.visible = true\n      this.getData()\n    },\n    handleClose11 () {\n      this.modal11.type = ''\n      this.modal11.record = null\n      this.modal11.visible = false\n  },\n    //分承包\n    mouseScontractMenu: function (event, node) {\n      console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\n      this.modal12.type = 'tree_s_contract'\n      this.modal12.record = null\n      this.modal12.visible = true\n      this.getData()\n    },\n    handleClose12 () {\n      this.modal12.type = ''\n      this.modal12.record = null\n      this.modal12.visible = false\n  },\n\n    handlePlanEdit(record) {\n      this.planModal.type = 'edit'\n      this.planModal.record = record\n      this.planModal.visible = true\n      console.log(this.planModal.record)\n    },\n\n    handleCloseTable () {\n      this.planModal.type = ''\n      this.planModal.record = null\n      this.planModal.visible = false\n      this.getData()\n  },\n\n    dragStart: function (event, node) {\n      let nodeData = event.dataTransfer.getData('nodedata')\n      console.log('节点开始移动', event.clientX, event.clientY, node, JSON.parse(nodeData))\n    },\n    dragEnd: function (event, node) {\n      console.log('节点移动结束', event.clientX, event.clientY, node)\n    },\n    addPath: function (event, startData, endData) {\n      console.log('添加路径', event, startData, endData)\n    },\n    dragGing: function (event) {\n      console.log('节点移动中...', event.clientX, event.clientY)\n    },\n    updateCompleted: function () {\n      console.log('updateCompleted!!')\n      // 重新加载路径\n      this.$refs.curve.vReload()\n    },\n     mouseFn (event, portData) {\n        console.log('mouseFn', 'on-mouse', '鼠标右击路径事件', event, portData)\n      },\n      mouseOverFn (event, portData) {\n        console.log('mouseFn', 'on-mouse-over', '鼠标划入路径事件', event, portData)\n      },\n      mouseOutFn (event, portData) {\n        console.log('mouseFn', 'on-mouse-out', '鼠标划出路径事件', event, portData)\n      }\n  }\n}\n",{"version":3,"sources":["invest_tree.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"invest_tree.vue","sourceRoot":"src/views/implement/invest/invest_tree","sourcesContent":["<template >\r\n  <div>实际花费：\r\n    <tree-plan-modal\r\n      :record=\"planModal.record\"\r\n      :visible=\"planModal.visible\"\r\n      :type=\"planModal.type\"\r\n      v-if=\"planModal.visible\"\r\n      :tree_view_id=\"planModal.tree_view_id\"\r\n      @close=\"handleCloseTable()\">\r\n\r\n    </tree-plan-modal>\r\n    <tree-plan-total-modal\r\n      :record=\"modal1.record\"\r\n      :visible=\"modal1.visible\"\r\n      :type=\"modal1.type\"\r\n      v-if=\"modal1.visible\"\r\n      :tree_view_id=\"modal1.tree_view_id\"\r\n      @close=\"handleClose1P2()\"></tree-plan-total-modal>\r\n    <tree-actual-total-modal\r\n      :record=\"modal2.record\"\r\n      :visible=\"modal2.visible\"\r\n      :type=\"modal2.type\"\r\n      v-if=\"modal2.visible\"\r\n      :tree_actual_id=\"modal2.process_id\"\r\n      @close=\"handleClose2()\"></tree-actual-total-modal>\r\n    <tree-actual-before-modal\r\n      :record=\"modal3.record\"\r\n      :visible=\"modal3.visible\"\r\n      :type=\"modal3.type\"\r\n      v-if=\"modal3.visible\"\r\n      :tree_id=\"modal3.application_id\"\r\n      @close=\"handleClose3()\"></tree-actual-before-modal>\r\n    <tree-actual-service-modal\r\n      :record=\"modal4.record\"\r\n      :visible=\"modal4.visible\"\r\n      :type=\"modal4.type\"\r\n      v-if=\"modal4.visible\"\r\n      :tree_actual_id=\"modal4.process_id\"\r\n      @close=\"handleClose4()\"></tree-actual-service-modal>\r\n    <tree-actual-contruct-modal\r\n      :record=\"modal5.record\"\r\n      :visible=\"modal5.visible\"\r\n      :type=\"modal5.type\"\r\n      v-if=\"modal5.visible\"\r\n      :tree_actual_id=\"modal5.process_id\"\r\n      @close=\"handleClose5()\"></tree-actual-contruct-modal>\r\n    <tree-actual-others-modal\r\n      :record=\"modal6.record\"\r\n      :visible=\"modal6.visible\"\r\n      :type=\"modal6.type\"\r\n      v-if=\"modal6.visible\"\r\n      :tree_actual_id=\"modal6.process_id\"\r\n      @close=\"handleClose6()\"></tree-actual-others-modal>\r\n    <tree-actual-bid-modal\r\n      :record=\"modal7.record\"\r\n      :visible=\"modal7.visible\"\r\n      :type=\"modal7.type\"\r\n      v-if=\"modal7.visible\"\r\n      :tree_actual_id=\"modal7.process_id\"\r\n      @close=\"handleClose7()\"></tree-actual-bid-modal>\r\n    <tree-actual-design-modal\r\n      :record=\"modal8.record\"\r\n      :visible=\"modal8.visible\"\r\n      :type=\"modal8.type\"\r\n      v-if=\"modal8.visible\"\r\n      :tree_actual_id=\"modal8.process_id\"\r\n      @close=\"handleClose8()\"></tree-actual-design-modal>\r\n    <tree-actual-consult-modal\r\n      :record=\"modal9.record\"\r\n      :visible=\"modal9.visible\"\r\n      :type=\"modal9.type\"\r\n      v-if=\"modal9.visible\"\r\n      :tree_actual_id=\"modal9.process_id\"\r\n      @close=\"handleClose9()\"></tree-actual-consult-modal>\r\n    <tree-actual-supervisor-modal\r\n      :record=\"modal10.record\"\r\n      :visible=\"modal10.visible\"\r\n      :type=\"modal10.type\"\r\n      v-if=\"modal10.visible\"\r\n      :tree_actual_id=\"modal10.process_id\"\r\n      @close=\"handleClose10()\"></tree-actual-supervisor-modal>\r\n    <tree-actual-gcontract-modal\r\n      :record=\"modal11.record\"\r\n      :visible=\"modal11.visible\"\r\n      :type=\"modal11.type\"\r\n      v-if=\"modal11.visible\"\r\n      :tree_actual_id=\"modal11.process_id\"\r\n      @close=\"handleClose11()\"></tree-actual-gcontract-modal>\r\n    <tree-actual-scontract-modal\r\n      :record=\"modal12.record\"\r\n      :visible=\"modal12.visible\"\r\n      :type=\"modal12.type\"\r\n      v-if=\"modal12.visible\"\r\n      :tree_actual_id=\"modal12.process_id\"\r\n      @close=\"handleClose12()\"></tree-actual-scontract-modal>\r\n\r\n    <task-work-area width=\"1000\" height=\"800\" :ini=\"ini_config\" :id=\"project_id\" v-on:on-add-nodemodel=\"onAddNodeModel\"\r\n                  v-on:on-mouse=\"onMouse\" :datasrc=\"treeList\">实际花费：\r\n      <task-path :portData=\"portData1\" v-on:on-mouse=\"mouseFn\" v-on:on-mouse-over=\"mouseOverFn\" v-on:on-mouse-out=\"mouseOutFn\"></task-path>\r\n         <task-path :portData=\"portData2\" v-on:on-mouse=\"mouseFn\" v-on:on-mouse-over=\"mouseOverFn\" v-on:on-mouse-out=\"mouseOutFn\"></task-path>\r\n         <task-path :portData=\"portData3\" v-on:on-mouse=\"mouseFn\" v-on:on-mouse-over=\"mouseOverFn\" v-on:on-mouse-out=\"mouseOutFn\"></task-path>\r\n         <task-path :portData=\"portData4\" v-on:on-mouse=\"mouseFn\" v-on:on-mouse-over=\"mouseOverFn\" v-on:on-mouse-out=\"mouseOutFn\"></task-path>\r\n         <task-path :portData=\"portData5\" v-on:on-mouse=\"mouseFn\" v-on:on-mouse-over=\"mouseOverFn\" v-on:on-mouse-out=\"mouseOutFn\"></task-path>\r\n         <task-path :portData=\"portData6\" v-on:on-mouse=\"mouseFn\" v-on:on-mouse-over=\"mouseOverFn\" v-on:on-mouse-out=\"mouseOutFn\"></task-path>\r\n         <task-path :portData=\"portData7\" v-on:on-mouse=\"mouseFn\" v-on:on-mouse-over=\"mouseOverFn\" v-on:on-mouse-out=\"mouseOutFn\"></task-path>   <task-path :portData=\"portData1\" v-on:on-mouse=\"mouseFn\" v-on:on-mouse-over=\"mouseOverFn\" v-on:on-mouse-out=\"mouseOutFn\"></task-path>\r\n         <task-path :portData=\"portData8\" v-on:on-mouse=\"mouseFn\" v-on:on-mouse-over=\"mouseOverFn\" v-on:on-mouse-out=\"mouseOutFn\"></task-path>\r\n         <task-path :portData=\"portData9\" v-on:on-mouse=\"mouseFn\" v-on:on-mouse-over=\"mouseOverFn\" v-on:on-mouse-out=\"mouseOutFn\"></task-path>\r\n         <task-path :portData=\"portData10\" v-on:on-mouse=\"mouseFn\" v-on:on-mouse-over=\"mouseOverFn\" v-on:on-mouse-out=\"mouseOutFn\"></task-path>\r\n\r\n     <task-curve-path areaid=\"areaID\" :paths=\"paths\" ref=\"curve\" v-on:on-mouse=\"mouseFn\" v-on:on-mouse-over=\"mouseOverFn\" v-on:on-mouse-out=\"mouseOutFn\"></task-curve-path>\r\n      //总计划\r\n     <task-common-node :key=\"node1.id\" :node=\"node1\" v-on:on-add-path=\"addPath\" v-on:on-mouse=\"selectlTotalMethod(record)\"\r\n                      v-on:on-drag-start=\"dragStart\" v-on:on-drag-ging=\"dragGing\" v-on:on-drag-end=\"dragEnd\"\r\n                      :updateTem=\"updateCompleted\"\r\n                      v-on:on-select=\"mouseTotalMenu\"></task-common-node>\r\n      //前期手续\r\n    <task-common-node :key=\"node2.id\" :node=\"node2\" v-on:on-add-path=\"addPath\" v-on:on-select=\"selectlBeforeMethod\"\r\n                      v-on:on-drag-start=\"dragStart\" v-on:on-drag-ging=\"dragGing\" v-on:on-drag-end=\"dragEnd\"\r\n                      :updateTem=\"updateCompleted\"\r\n                      v-on:on-mouse=\"mouseNodeMenu\"></task-common-node>\r\n      //咨询服务\r\n      <task-common-node :key=\"node3.id\" :node=\"node3\" v-on:on-add-path=\"addPath\" v-on:on-mouse=\"selectlMethod\"\r\n                      v-on:on-drag-start=\"dragStart\" v-on:on-drag-ging=\"dragGing\" v-on:on-drag-end=\"dragEnd\"\r\n                      :updateTem=\"updateCompleted\"\r\n                      v-on:on-select=\"mouseServiceMenu\"></task-common-node>\r\n      //施工\r\n       <task-common-node :key=\"node4.id\" :node=\"node4\" v-on:on-add-path=\"addPath\" v-on:on-mouse=\"selectlMethod\"\r\n                      v-on:on-drag-start=\"dragStart\" v-on:on-drag-ging=\"dragGing\" v-on:on-drag-end=\"dragEnd\"\r\n                      :updateTem=\"updateCompleted\"\r\n                      v-on:on-select=\"mouseContructMenu\"></task-common-node>\r\n      //其他\r\n       <task-common-node :key=\"node5.id\" :node=\"node5\" v-on:on-add-path=\"addPath\" v-on:on-mouse=\"selectlMethod\"\r\n                      v-on:on-drag-start=\"dragStart\" v-on:on-drag-ging=\"dragGing\" v-on:on-drag-end=\"dragEnd\"\r\n                      :updateTem=\"updateCompleted\"\r\n                      v-on:on-select=\"mouseOthersMenu\"></task-common-node>\r\n      //咨询服务----招标\r\n       <task-common-node :key=\"node6.id\" :node=\"node6\" v-on:on-add-path=\"addPath\" v-on:on-mouse=\"selectlMethod\"\r\n                      v-on:on-drag-start=\"dragStart\" v-on:on-drag-ging=\"dragGing\" v-on:on-drag-end=\"dragEnd\"\r\n                      :updateTem=\"updateCompleted\"\r\n                      v-on:on-select=\"mouseBidMenu\"></task-common-node>\r\n      //咨询服务----设计\r\n       <task-common-node :key=\"node7.id\" :node=\"node7\" v-on:on-add-path=\"addPath\" v-on:on-mouse=\"selectlMethod\"\r\n                      v-on:on-drag-start=\"dragStart\" v-on:on-drag-ging=\"dragGing\" v-on:on-drag-end=\"dragEnd\"\r\n                      :updateTem=\"updateCompleted\"\r\n                      v-on:on-select=\"mouseDesignMenu\"></task-common-node>\r\n      //咨询服务----咨询\r\n       <task-common-node :key=\"node8.id\" :node=\"node8\" v-on:on-add-path=\"addPath\" v-on:on-mouse=\"selectlMethod\"\r\n                      v-on:on-drag-start=\"dragStart\" v-on:on-drag-ging=\"dragGing\" v-on:on-drag-end=\"dragEnd\"\r\n                      :updateTem=\"updateCompleted\"\r\n                      v-on:on-select=\"mouseConsultMenu\"></task-common-node>\r\n      //咨询服务----监理\r\n       <task-common-node :key=\"node9.id\" :node=\"node9\" v-on:on-add-path=\"addPath\" v-on:on-mouse=\"selectlMethod\"\r\n                      v-on:on-drag-start=\"dragStart\" v-on:on-drag-ging=\"dragGing\" v-on:on-drag-end=\"dragEnd\"\r\n                      :updateTem=\"updateCompleted\"\r\n                      v-on:on-select=\"mouseSupervisorMenu\"></task-common-node>\r\n      //路径9：施工----总承包\r\n       <task-common-node :key=\"node10.id\" :node=\"node10\" v-on:on-add-path=\"addPath\" v-on:on-mouse=\"selectlMethod\"\r\n                      v-on:on-drag-start=\"dragStart\" v-on:on-drag-ging=\"dragGing\" v-on:on-drag-end=\"dragEnd\"\r\n                      :updateTem=\"updateCompleted\"\r\n                      v-on:on-select=\"mouseGcontractMenu\"></task-common-node>\r\n      //路径10：施工----分承包\r\n       <task-common-node :key=\"node11.id\" :node=\"node11\" v-on:on-add-path=\"addPath\" v-on:on-mouse=\"selectlMethod\"\r\n                      v-on:on-drag-start=\"dragStart\" v-on:on-drag-ging=\"dragGing\" v-on:on-drag-end=\"dragEnd\"\r\n                      :updateTem=\"updateCompleted\"\r\n                      v-on:on-select=\"mouseScontractMenu\"></task-common-node>\r\n\r\n\r\n  </task-work-area>\r\n    <a-card style=\"margin-bottom: 16px\">计划花费：\r\n      <a-table\r\n          bordered\r\n          :columns=\"columns\"\r\n          :dataSource=\"treeList\"\r\n          rowKey=\"tree_view_id\"\r\n          :scroll=\"{x:1300}\"\r\n          :pagination=\"false\">\r\n          <template slot=\"operation\" slot-scope=\"text, record, index\">\r\n            <a-button @click=\"handlePlanEdit(record)\">编辑</a-button>\r\n          </template>\r\n        </a-table>\r\n      <a-col\r\n        :xs=\"{span: 24}\"\r\n        :sm=\"{span: 20, offset: 2}\"\r\n        :xl=\"{span: 16, offset: 4}\">\r\n      </a-col>\r\n    </a-card>\r\n  </div>\r\n\r\n\r\n</template>\r\n\r\n<script>\r\n  import api from '../../../../api/implement'\r\n  import TreePlanTotalModal from './components/TreePlanTotalModal'\r\n  import TreeActualBidModal from './components/TreeActualBidModal'\r\n  import TreeActualDesignModal from './components/TreeActualDesignModal'\r\n  import TreeActualConsultModal from './components/TreeActualConsultModal'\r\n  import TreeActualSupervisorModal from './components/TreeActualSupervisorModal'\r\n  import TreeActualGcontractModal from './components/TreeActualGcontractModal'\r\n  import TreeActualScontractModal from './components/TreeActualScontractModal'\r\n  import TreeActualContructModal from './components/TreeActualContructModal'\r\n  import TreeActualServiceModal from './components/TreeActualServiceModal'\r\n  import TreeActualTotalModal from './components/TreeActualTotalModal'\r\n  import TreeActualBeforeModal from './components/TreeActualBeforeModal'\r\n  import TreeActualOthersModal from './components/TreeActualOthersModal'\r\n  import TreePlanModal from './components/TreePlanModal'\r\n\r\n  import getBoundingClientRect from 'vue-task-node/src/lib/components/node/node'\r\n  const columns = [\r\n    {\r\n      title: '总计划',\r\n      dataIndex: 'allPaidTotal',\r\n      width: '25%',\r\n      align: 'center'\r\n    },\r\n    {\r\n      title: '咨询服务',\r\n      dataIndex: 'consultServicePaidTotal',\r\n      width: '25%',\r\n      align: 'center'\r\n    },\r\n    {\r\n      title: '施工',\r\n      dataIndex: 'constructionPaidTotal',\r\n      width: '25%',\r\n      align: 'center'\r\n    },\r\n     {\r\n      title: '其他',\r\n      dataIndex: 'otherPaidTotal',\r\n      width: '25%',\r\n      align: 'center'\r\n    },\r\n     {\r\n      title: '招标',\r\n      dataIndex: 'bidPaidTotal',\r\n      width: '25%',\r\n      align: 'center'\r\n    },\r\n     {\r\n      title: '设计',\r\n      dataIndex: 'designPaidTotal',\r\n      width: '25%',\r\n      align: 'center'\r\n    },\r\n     {\r\n      title: '咨询',\r\n      dataIndex: 'consultationPaidTotal',\r\n      width: '25%',\r\n      align: 'center'\r\n    },\r\n     {\r\n      title: '监理',\r\n      dataIndex: 'supervisorPaidTotal',\r\n      width: '25%',\r\n      align: 'center'\r\n    },\r\n     {\r\n      title: '总承包',\r\n      dataIndex: 'generalContractPaidTotal',\r\n      width: '25%',\r\n      align: 'center'\r\n    },\r\n     {\r\n      title: '分承包',\r\n      dataIndex: 'subcontractPaidTotal',\r\n      width: '25%',\r\n      align: 'center'\r\n    },\r\n    {\r\n      title: '编辑',\r\n      dataIndex: 'operation',\r\n      scopedSlots: {customRender: 'operation'},\r\n      align: 'center'\r\n    }\r\n  ]\r\n  export default {\r\n    name: 'invest_tree',\r\n    components: {\r\n      TreePlanTotalModal,\r\n      TreeActualBidModal,\r\n      TreeActualDesignModal,\r\n      TreeActualConsultModal,\r\n      TreeActualSupervisorModal,\r\n      TreeActualGcontractModal,\r\n      TreeActualScontractModal,\r\n      TreeActualContructModal,\r\n      TreeActualServiceModal,\r\n      TreeActualTotalModal,\r\n      TreeActualBeforeModal,\r\n      TreeActualOthersModal,\r\n      TreePlanModal,\r\n      getBoundingClientRect\r\n  },\r\n    props: {\r\n      id: Number\r\n  },\r\n    data () {\r\n      return {\r\n        columns,\r\n        project_id: this.id,\r\n        ini_config: {\r\n          lineType: 'Q',\r\n          isDotted: false,\r\n          scaling: {\r\n            ZoomX: 1,\r\n            ZoomY: 1\r\n          }\r\n        },\r\n        paths:[],\r\n        // paths: [\r\n        //   {\r\n        //     dotted: true,\r\n        //     ptype: 'Q',\r\n        //     startPort: 'node1_1',\r\n        //     endPort: 'node2_1'\r\n        //   },\r\n        //   {\r\n        //     dotted: true,\r\n        //     ptype: 'L',\r\n        //     startPort: 'node1_2',\r\n        //     endPort: 'node3_1'\r\n        //   }, {\r\n        //     dotted: false,\r\n        //     ptype: 'Q',\r\n        //     startPort: 'node1_3',\r\n        //     endPort: 'node4_1'\r\n        //   }, {\r\n        //     dotted: false,\r\n        //     ptype: 'L',\r\n        //     startPort: 'node1_4',\r\n        //     endPort: 'node5_1'\r\n        //   }],\r\n        //总计划\r\n        node1: {\r\n          id: 'node1',\r\n          name: '总计划',\r\n          positionX: 500,\r\n          positionY: 100,\r\n          state: 'mistake',\r\n          outPorts: [\r\n            {\r\n              id: 'node1_1'\r\n            },\r\n            {\r\n              id: 'node1_2'\r\n            },\r\n            {\r\n              id: 'node1_3'\r\n            },\r\n            {\r\n              id: 'node1_4'\r\n            },\r\n          ]\r\n\r\n        },\r\n        //前期手续\r\n        node2: {\r\n          id: 'node2',\r\n          name: '前期手续',\r\n          positionX: 100,\r\n          positionY: 200,\r\n          state: 'mistake',\r\n          inPorts: [\r\n            {\r\n              id: 'node2_1',\r\n              isConnected: true\r\n            }\r\n          ]\r\n\r\n        },\r\n        //咨询服务\r\n         node3: {\r\n          id: 'node3',\r\n          name: '咨询服务',\r\n          positionX: 350,\r\n          positionY: 200,\r\n          state: 'mistake',\r\n          inPorts: [\r\n            {\r\n              id: 'node3_1',\r\n              isConnected: true\r\n            }\r\n          ],\r\n           outPorts: [\r\n            {\r\n              id: 'node3_2'\r\n            },\r\n            {\r\n              id: 'node3_3'\r\n            },\r\n            {\r\n              id: 'node3_4'\r\n            },\r\n            {\r\n              id: 'node3_5'\r\n            },\r\n          ]\r\n\r\n        },\r\n        //施工\r\n         node4: {\r\n          id: 'node4',\r\n          name: '施工',\r\n          positionX: 600,\r\n          positionY: 200,\r\n          state: 'mistake',\r\n          inPorts: [\r\n            {\r\n              id: 'node4_1',\r\n              isConnected: true\r\n            }\r\n          ],\r\n           outPorts: [\r\n            {\r\n              id: 'node4_2'\r\n            },\r\n            {\r\n              id: 'node4_3'\r\n            }\r\n          ]\r\n\r\n        },\r\n        //其他\r\n        node5: {\r\n          id: 'node5',\r\n          name: '其他',\r\n          positionX: 850,\r\n          positionY: 200,\r\n          state: 'mistake',\r\n          inPorts: [\r\n            {\r\n              id: 'node4_1',\r\n              isConnected: true\r\n            }\r\n          ]\r\n\r\n        },\r\n        //咨询服务----招标\r\n        node6: {\r\n          id: 'node6',\r\n          name: '招标',\r\n          positionX: 0,\r\n          positionY: 300,\r\n          state: 'mistake',\r\n          inPorts: [\r\n            {\r\n              id: 'node6_1',\r\n              isConnected: true\r\n            }\r\n          ]\r\n\r\n        },\r\n         //咨询服务----设计\r\n        node7: {\r\n          id: 'node7',\r\n          name: '设计',\r\n          positionX: 250,\r\n          positionY: 300,\r\n          state: 'mistake',\r\n          inPorts: [\r\n            {\r\n              id: 'node7_1',\r\n              isConnected: true\r\n            }\r\n          ]\r\n\r\n        },\r\n        //咨询服务----咨询\r\n        node8: {\r\n          id: 'node8',\r\n          name: '咨询',\r\n          positionX: 500,\r\n          positionY: 300,\r\n          state: 'mistake',\r\n          inPorts: [\r\n            {\r\n              id: 'node8_1',\r\n              isConnected: true\r\n            }\r\n          ]\r\n\r\n        },\r\n        //咨询服务----监理\r\n        node9: {\r\n          id: 'node9',\r\n          name: '监理',\r\n          positionX:750,\r\n          positionY: 300,\r\n          state: 'mistake',\r\n          inPorts: [\r\n            {\r\n              id: 'node9_1',\r\n              isConnected: true\r\n            }\r\n          ]\r\n\r\n        },\r\n         //施工----总承包\r\n        node10: {\r\n          id: 'node10',\r\n          name: '总承包',\r\n          positionX: 1000,\r\n          positionY: 300,\r\n          state: 'mistake',\r\n          inPorts: [\r\n            {\r\n              id: 'node10_1',\r\n              isConnected: true\r\n            }\r\n          ]\r\n\r\n        },\r\n         //施工----分承包\r\n        node11: {\r\n          id: 'node11',\r\n          name: '分承包',\r\n          positionX: 1250,\r\n          positionY: 300,\r\n          state: 'mistake',\r\n          inPorts: [\r\n            {\r\n              id: 'node11_1',\r\n              isConnected: true\r\n            }\r\n          ]\r\n\r\n        },\r\n        //路径1：总计划--前期手续 Mxy:x+40,y+0;Txy:x+250,y+0\r\n        portData1: {\r\n          ptype: 'Q',\r\n          dotted: false,\r\n          Mxy: {\r\n            x: 535,\r\n            y: 130\r\n          },\r\n          Txy: {\r\n            x: 190,\r\n            y: 200\r\n          },\r\n          startPort: 'node1',\r\n          endPort: 'node2'\r\n        },\r\n        //路径2：总计划--咨询服务\r\n        portData2: {\r\n          ptype: 'Q',\r\n          dotted: false,\r\n          Mxy: {\r\n            x: 575,\r\n            y: 130\r\n          },\r\n          Txy: {\r\n            x: 440,\r\n            y: 200\r\n          },\r\n          startPort: 'node1',\r\n          endPort: 'node2'\r\n        },\r\n        //路径3：总计划----施工\r\n        portData3: {\r\n          ptype: 'Q',\r\n          dotted: false,\r\n          Mxy: {\r\n            x: 612,\r\n            y: 130\r\n          },\r\n          Txy: {\r\n            x: 690,\r\n            y: 200\r\n          },\r\n          startPort: 'node1',\r\n          endPort: 'node2'\r\n        },\r\n        //路径4：总计划---其他\r\n        portData4: {\r\n          ptype: 'Q',\r\n          dotted: false,\r\n          Mxy: {\r\n            x: 648,\r\n            y: 130\r\n          },\r\n          Txy: {\r\n            x: 940,\r\n            y: 200\r\n          },\r\n          startPort: 'node1',\r\n          endPort: 'node2'\r\n        },\r\n        //路径5：咨询服务---招标 Mxy:x+40,y+30;Txy:x+250,y+0\r\n        portData5: {\r\n          ptype: 'Q',\r\n          dotted: false,\r\n          Mxy: {\r\n            x: 385,\r\n            y: 230\r\n          },\r\n          Txy: {\r\n            x: 90,\r\n            y: 300\r\n          },\r\n          startPort: 'node1',\r\n          endPort: 'node2'\r\n        },\r\n        //路径6：咨询服务----设计\r\n        portData6: {\r\n          ptype: 'Q',\r\n          dotted: false,\r\n          Mxy: {\r\n            x: 425,\r\n            y: 230\r\n          },\r\n          Txy: {\r\n            x: 340,\r\n            y: 300\r\n          },\r\n          startPort: 'node1',\r\n          endPort: 'node2'\r\n        },\r\n        //路径7：咨询服务----咨询\r\n        portData7: {\r\n          ptype: 'Q',\r\n          dotted: false,\r\n          Mxy: {\r\n            x: 460,\r\n            y: 230\r\n          },\r\n          Txy: {\r\n            x: 590,\r\n            y: 300\r\n          },\r\n          startPort: 'node1',\r\n          endPort: 'node2'\r\n        },\r\n        //路径8：咨询服务----监理\r\n        portData8: {\r\n          ptype: 'Q',\r\n          dotted: false,\r\n          Mxy: {\r\n            x: 500,\r\n            y: 230\r\n          },\r\n          Txy: {\r\n            x: 840,\r\n            y: 300\r\n          },\r\n          startPort: 'node1',\r\n          endPort: 'node2'\r\n        },\r\n        //路径9：施工----总承包\r\n        portData9: {\r\n          ptype: 'Q',\r\n          dotted: false,\r\n          Mxy: {\r\n            x: 660,\r\n            y: 230\r\n          },\r\n          Txy: {\r\n            x: 1090,\r\n            y: 300\r\n          },\r\n          startPort: 'node1',\r\n          endPort: 'node2'\r\n        },\r\n        //路径10：施工----分承包\r\n        portData10: {\r\n          ptype: 'Q',\r\n          dotted: false,\r\n          Mxy: {\r\n            x: 720,\r\n            y: 230\r\n          },\r\n          Txy: {\r\n            x: 1340,\r\n            y: 300\r\n          },\r\n          startPort: 'node1',\r\n          endPort: 'node2'\r\n        },\r\n\r\n        //左击弹窗：计划花费（手动添加）\r\n        modal1: {\r\n          record: null,\r\n          visible: false,\r\n          type: '1',\r\n          tree_view_id: this.id\r\n        },\r\n        modal3: {\r\n        record: null,\r\n        visible: false,\r\n        type: '1',\r\n        tree_id: this.id\r\n      },\r\n        //右击弹窗：实际花费（抓取数据）\r\n         modal2: {\r\n        record: null,\r\n        visible: false,\r\n        type: '1',\r\n        tree_actual_id: this.id\r\n      },\r\n         modal4: {\r\n        record: null,\r\n        visible: false,\r\n        type: '1',\r\n        tree_actual_id: this.id\r\n      },\r\n        modal5: {\r\n        record: null,\r\n        visible: false,\r\n        type: '1',\r\n        tree_actual_id: this.id\r\n      },\r\n         modal6: {\r\n        record: null,\r\n        visible: false,\r\n        type: '1',\r\n        tree_actual_id: this.id\r\n      },\r\n      modal7: {\r\n        record: null,\r\n        visible: false,\r\n        type: '1',\r\n        tree_actual_id: this.id\r\n      },\r\n        modal8: {\r\n        record: null,\r\n        visible: false,\r\n        type: '1',\r\n        tree_actual_id: this.id\r\n      },\r\n        modal9: {\r\n        record: null,\r\n        visible: false,\r\n        type: '1',\r\n        tree_actual_id: this.id\r\n      },\r\n        modal10: {\r\n        record: null,\r\n        visible: false,\r\n        type: '1',\r\n        tree_actual_id: this.id\r\n      },\r\n        modal11: {\r\n          record: null,\r\n          visible: false,\r\n          type: '1',\r\n          tree_actual_id: this.id\r\n        },\r\n         modal12: {\r\n          record: null,\r\n          visible: false,\r\n          type: '1',\r\n          tree_actual_id: this.id\r\n        },\r\n        planModal:{\r\n          record: null,\r\n          visible: false,\r\n          type: '1',\r\n          tree_view_id: this.id\r\n        },\r\n        process: {},\r\n        processList: [],\r\n        applicationList: [],\r\n        trees:{},\r\n        treeList:[]\r\n\r\n      }\r\n    },\r\n    mounted () {\r\n      this.getData()\r\n    },\r\n    methods: {\r\n       getData () {\r\n        //  api.getInvestProcessList(this.$store.getters.projectSelected.id)\r\n        // .then(data => {\r\n        //   console.log(data)\r\n        //   this.processList = data\r\n        // })\r\n      api.getTreeList(this.$store.getters.projectSelected.id)\r\n        .then(data => {\r\n          console.log(data)\r\n          this.treeList = data\r\n        }),\r\n       api.getTrees(this.id)\r\n        .then(data => {\r\n          this.trees = data\r\n        })\r\n\r\n      // api.getInvestProcess(this.id)\r\n      //   .then(data => {\r\n      //     console.log(data)\r\n      //     this.process = data\r\n      //   })\r\n\r\n    },\r\n      onMouse: function (event, work_id) {\r\n        console.log('鼠标右击工作区事件！', event, work_id)\r\n      },\r\n      onAddNodeModel (event, node) {\r\n        console.log('添加节点', event.clientX, event.clientY, node)\r\n        let newNode = {}\r\n        newNode = node\r\n        newNode.id = 'node' + Math.floor(Math.random() * 100)\r\n        newNode.positionX = node.positionX - 90 // -15 -90 定位到节点的终点\r\n        newNode.positionY = node.positionY - 15\r\n        newNode.outPorts = [{\r\n          id: newNode.id + '_' + Math.floor(Math.random() * 10)\r\n         }]\r\n        newNode.inPorts = []\r\n        this.nodes.push(newNode)\r\n     },\r\n      //节点左键点击事件\r\n       selectlMethod: function (event, data, node) {\r\n        console.log('selectlMethod', 'on-select', '节点左键点击事件', event, data, node)\r\n      },\r\n      //总计划\r\n      selectlTotalMethod(record) {\r\n        console.log('selectlMethod', 'on-select', '节点左键点击事件')\r\n        this.modal1.type = 'plan_total'\r\n        this.modal1.record = record\r\n        this.modal1.visible = true\r\n        console.log(record)\r\n      },\r\n      handleClose1P2() {\r\n      this.modal1.type = ''\r\n      this.modal1.record = null\r\n      this.modal1.visible = false\r\n    },\r\n      //前期手续\r\n      selectlBeforeMethod: function (event, data, node) {\r\n        console.log('selectlMethod', 'on-select', '节点左键点击事件', event, data, node)\r\n        this.modal3.type = 'Lbefore'\r\n        this.modal3.record = null\r\n        this.modal3.visible = true\r\n        this.getData()\r\n      },\r\n      handleClose3 () {\r\n      this.modal3.type = ''\r\n      this.modal3.record = null\r\n      this.modal3.visible = false\r\n    },\r\n      //节点右击事件\r\n      //节点右击事件\r\n      mouseNodeMenu: function (event, node) {\r\n        console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\r\n        this.getData()\r\n      },\r\n      //总计划\r\n      mouseTotalMenu: function (event, node) {\r\n        console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\r\n        this.modal2.type = 'tree_total'\r\n        this.modal2.record = null\r\n        this.modal2.visible = true\r\n        this.getData()\r\n      },\r\n      handleClose2 () {\r\n        this.modal2.type = ''\r\n        this.modal2.record = null\r\n        this.modal2.visible = false\r\n    },\r\n      //咨询服务：招标+设计+监理+咨询\r\n      mouseServiceMenu: function (event, node) {\r\n        console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\r\n        this.modal4.type = 'tree_service'\r\n        this.modal4.record = null\r\n        this.modal4.visible = true\r\n        this.getData()\r\n      },\r\n      handleClose4 () {\r\n        this.modal4.type = ''\r\n        this.modal4.record = null\r\n        this.modal4.visible = false\r\n    },\r\n      //施工：总承包+分承包\r\n      mouseContructMenu: function (event, node) {\r\n        console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\r\n        this.modal5.type = 'tree_construct'\r\n        this.modal5.record = null\r\n        this.modal5.visible = true\r\n        this.getData()\r\n      },\r\n      handleClose5 () {\r\n        this.modal5.type = ''\r\n        this.modal5.record = null\r\n        this.modal5.visible = false\r\n    },\r\n       //其他\r\n      mouseOthersMenu: function (event, node) {\r\n        console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\r\n        this.modal6.type = 'tree_others'\r\n        this.modal6.record = null\r\n        this.modal6.visible = true\r\n        this.getData()\r\n      },\r\n      handleClose6 () {\r\n        this.modal6.type = ''\r\n        this.modal6.record = null\r\n        this.modal6.visible = false\r\n    },\r\n      //招标\r\n      mouseBidMenu: function (event, node) {\r\n        console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\r\n        this.modal7.type = 'tree_bid'\r\n        this.modal7.record = null\r\n        this.modal7.visible = true\r\n        this.getData()\r\n      },\r\n      handleClose7 () {\r\n        this.modal7.type = ''\r\n        this.modal7.record = null\r\n        this.modal7.visible = false\r\n    },\r\n      //设计\r\n      mouseDesignMenu: function (event, node) {\r\n        console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\r\n        this.modal8.type = 'tree_design'\r\n        this.modal8.record = null\r\n        this.modal8.visible = true\r\n        this.getData()\r\n      },\r\n      handleClose8 () {\r\n        this.modal8.type = ''\r\n        this.modal8.record = null\r\n        this.modal8.visible = false\r\n    },\r\n      //咨询\r\n       mouseConsultMenu: function (event, node) {\r\n        console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\r\n        this.modal9.type = 'tree_consult'\r\n        this.modal9.record = null\r\n        this.modal9.visible = true\r\n        this.getData()\r\n      },\r\n      handleClose9 () {\r\n        this.modal9.type = ''\r\n        this.modal9.record = null\r\n        this.modal9.visible = false\r\n    },\r\n      //监理\r\n      mouseSupervisorMenu: function (event, node) {\r\n        console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\r\n        this.modal10.type = 'tree_supervisor'\r\n        this.modal10.record = null\r\n        this.modal10.visible = true\r\n        this.getData()\r\n      },\r\n      handleClose10 () {\r\n        this.modal10.type = ''\r\n        this.modal10.record = null\r\n        this.modal10.visible = false\r\n    },\r\n      //总承包\r\n      mouseGcontractMenu: function (event, node) {\r\n        console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\r\n        this.modal11.type = 'tree_g_contract'\r\n        this.modal11.record = null\r\n        this.modal11.visible = true\r\n        this.getData()\r\n      },\r\n      handleClose11 () {\r\n        this.modal11.type = ''\r\n        this.modal11.record = null\r\n        this.modal11.visible = false\r\n    },\r\n      //分承包\r\n      mouseScontractMenu: function (event, node) {\r\n        console.log('mouseNodeMenu', 'on-mouse', '节点右击事件', event, node)\r\n        this.modal12.type = 'tree_s_contract'\r\n        this.modal12.record = null\r\n        this.modal12.visible = true\r\n        this.getData()\r\n      },\r\n      handleClose12 () {\r\n        this.modal12.type = ''\r\n        this.modal12.record = null\r\n        this.modal12.visible = false\r\n    },\r\n\r\n      handlePlanEdit(record) {\r\n        this.planModal.type = 'edit'\r\n        this.planModal.record = record\r\n        this.planModal.visible = true\r\n        console.log(this.planModal.record)\r\n      },\r\n\r\n      handleCloseTable () {\r\n        this.planModal.type = ''\r\n        this.planModal.record = null\r\n        this.planModal.visible = false\r\n        this.getData()\r\n    },\r\n\r\n      dragStart: function (event, node) {\r\n        let nodeData = event.dataTransfer.getData('nodedata')\r\n        console.log('节点开始移动', event.clientX, event.clientY, node, JSON.parse(nodeData))\r\n      },\r\n      dragEnd: function (event, node) {\r\n        console.log('节点移动结束', event.clientX, event.clientY, node)\r\n      },\r\n      addPath: function (event, startData, endData) {\r\n        console.log('添加路径', event, startData, endData)\r\n      },\r\n      dragGing: function (event) {\r\n        console.log('节点移动中...', event.clientX, event.clientY)\r\n      },\r\n      updateCompleted: function () {\r\n        console.log('updateCompleted!!')\r\n        // 重新加载路径\r\n        this.$refs.curve.vReload()\r\n      },\r\n       mouseFn (event, portData) {\r\n          console.log('mouseFn', 'on-mouse', '鼠标右击路径事件', event, portData)\r\n        },\r\n        mouseOverFn (event, portData) {\r\n          console.log('mouseFn', 'on-mouse-over', '鼠标划入路径事件', event, portData)\r\n        },\r\n        mouseOutFn (event, portData) {\r\n          console.log('mouseFn', 'on-mouse-out', '鼠标划出路径事件', event, portData)\r\n        }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}