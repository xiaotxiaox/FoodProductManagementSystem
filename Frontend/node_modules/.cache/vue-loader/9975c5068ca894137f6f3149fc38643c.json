{"remainingRequest":"E:\\FoodProductManagementSystem\\Frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\FoodProductManagementSystem\\Frontend\\src\\views\\implement\\invest\\invest_table\\components\\investTableModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\FoodProductManagementSystem\\Frontend\\src\\views\\implement\\invest\\invest_table\\components\\investTableModal.vue","mtime":1573719570865},{"path":"E:\\FoodProductManagementSystem\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\FoodProductManagementSystem\\Frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\FoodProductManagementSystem\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\FoodProductManagementSystem\\Frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport api from '../../../../../api/implement'\nimport { mapGetters } from 'vuex'\nimport moment from 'moment'\n\nexport default {\n  name: 'investTableModal',\n  props: {\n    record: Object,\n    visible: Boolean,\n    type: String,\n  },\n  data () {\n    return {\n      layout: {\n        'label-col': { span: 8 },\n        'wrapper-col': { span: 12 }\n      },\n      form: this.$form.createForm(this),\n      matter: {},\n      categoryList:[\n         {key:'1', label:'建筑工程费', value:'建筑工程费'},\n         {key:'2', label:'安装工程费',value:'安装工程费'},\n         {key:'3', label:'设备预置费',value:'设备预置费'},\n         {key:'4', label:'土地使用费和其他补偿费',value:'土地使用费和其他补偿费'},\n         {key:'5', label:'建设管理费',value:'建设管理费'},\n         {key:'7', label:'专项评价费',value:'专项评价费'},\n         {key:'8', label:'研究试验费',value:'研究试验费'},\n         {key:'10', label:'场地准备费和临时设施费',value:'场地准备费和临时设施费'},\n         {key:'12', label:'特殊设备安全监督检验费',value:'特殊设备安全监督检验费'},\n         {key:'14', label:'联合试运转费',value:'联合试运转费'},\n         {key:'15', label:'工程保险费',value:'工程保险费'},\n         {key:'16', label:'专利及专有技术使用费',value:'专利及专有技术使用费'},\n         {key:'17', label:'生产准备费',value:'生产准备费'},\n         {key:'18', label:'监理费',value:'监理费'},\n         {key:'19', label:'造价咨询',value:'造价咨询'},\n         {key:'21', label:'其他',value:'其他'},\n         {key:'22', label:'预备费',value:'预备费'},\n         {key:'23', label:'增值税',value:'增值税'},\n         {key:'24', label:'资金筹措费',value:'资金筹措费'},\n         {key:'25', label:'流动资金',value:'流动资金'}\n      ]\n    }\n  },\n  mounted () {\n    this.getData()\n  },\n  methods: {\n    ...mapGetters(['projectSelected']),\n    getData () {\n      if (this.isEdit) {\n        if (this.record.start_time !== null) {\n          this.record.start_time = new moment(this.record.start_time)\n        }\n        if (this.record.end_time !== null) {\n          this.record.end_time = new moment(this.record.end_time)\n        }\n      }\n    },\n    handleOk () {\n      this.form.validateFields((error, data) => {\n          if (!error) {\n            if (data.start_time != null) {\n              data.start_time = data.start_time.format('YYYY-MM-DD')\n            }\n            if (data.end_time != null) {\n              data.end_time = data.end_time.format('YYYY-MM-DD')\n            }\n          }\n          if (this.isEdit) {\n            api.updateTotalInvest(this.record.total_investment_id, data)\n              .then(data => {\n                this.$notification.success({ message: '成功', description: '更新成功', key: 'SUCCESS' })\n                this.$emit('close')\n              })\n          } else {\n            api.createTotalInvest(this.$store.getters.projectSelected.id, data)\n              .then(data => {\n                this.$notification.success({ message: '成功', description: '新建成功', key: 'SUCCESS' })\n                this.$emit('close')\n              })\n          }\n        }\n      )\n    },\n    handleCancel () {\n      this.$emit('close')\n    }\n\n  },\n  computed: {\n    isEdit () {\n      return this.type === 'edit'\n    }\n    ,\n    title () {\n      return this.isEdit ? '编辑' : '新建'\n    }\n  }\n}\n",{"version":3,"sources":["investTableModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"investTableModal.vue","sourceRoot":"src/views/implement/invest/invest_table/components","sourcesContent":["<template xmlns:a-select-option=\"http://www.w3.org/1999/html\">\r\n    <a-modal\r\n    :title=\"title\"\r\n    :visible=\"visible\"\r\n    :keyboard=\"false\"\r\n    :maskClosable=\"false\"\r\n    okText=\"保存\"\r\n    okType=\"primary\"\r\n    @ok=\"handleOk()\"\r\n    @cancel=\"handleCancel()\">\r\n    <a-form\r\n      :form=\"form\">\r\n      <a-form-item\r\n        label=\"单位名称\"\r\n        :label-col=\"{span: 8}\"\r\n        :wrapper-col=\"{span: 12}\"\r\n        v-bind=\"layout\">\r\n        <a-input\r\n          type=\"text\"\r\n          v-decorator=\"[\r\n            'company_name',\r\n            {\r\n              rules:[\r\n                { required: true, message: '请输入名称' },\r\n                { max:32, message: '长度在32个汉字以内' }\r\n              ],\r\n              validateTrigger: 'blur',\r\n              initialValue: record ? record.company_name : null\r\n            }\r\n          ]\">\r\n        </a-input>\r\n      </a-form-item>\r\n       <a-form-item\r\n        label=\"项目名称\"\r\n        :label-col=\"{span: 8}\"\r\n        :wrapper-col=\"{span: 12}\"\r\n        v-bind=\"layout\">\r\n        <a-input\r\n          type=\"text\"\r\n          v-decorator=\"[\r\n            'project_name',\r\n            {\r\n              rules:[\r\n                { required: true, message: '请输入名称' },\r\n                { max:32, message: '长度在32个汉字以内' }\r\n              ],\r\n              validateTrigger: 'blur',\r\n              initialValue: record ? record.project_name : null\r\n            }\r\n          ]\">\r\n        </a-input>\r\n      </a-form-item>\r\n      <a-form-item\r\n        label=\"类别\"\r\n        :label-col=\"{span: 8}\"\r\n        :wrapper-col=\"{span: 12}\">\r\n        <a-select\r\n          placeholder=\"请选择类别\"\r\n          option.initialValue=\"建筑工程费\"\r\n          v-decorator=\"[\r\n                'category',\r\n                {rules: [\r\n                {required: true, message: '请选择类别'}\r\n                ],\r\n                initialValue: record?record.category:'建筑工程费'}\r\n              ]\">\r\n          <a-select-option v-for=\"item in categoryList\":value=\"item.value\":key=\"item.key\">{{item.label}}</a-select-option>\r\n\r\n        </a-select>\r\n      </a-form-item>\r\n      <a-form-item\r\n        label=\"开始时间\"\r\n        v-bind=\"layout\">\r\n        <a-date-picker\r\n          style=\"width:100%\"\r\n          v-decorator=\"[\r\n                'start_time',\r\n                {rules: [{type: 'object'}],\r\n                initialValue: record ? record.start_time : null}\r\n              ]\"></a-date-picker>\r\n      </a-form-item>\r\n      <a-form-item\r\n        label=\"截止时间\"\r\n        v-bind=\"layout\">\r\n        <a-date-picker\r\n          style=\"width:100%\"\r\n          v-decorator=\"[\r\n                'end_time',\r\n                {rules: [{type: 'object'}],\r\n                initialValue: record ? record.end_time : null}\r\n              ]\"></a-date-picker>\r\n      </a-form-item>\r\n\r\n      <a-form-item\r\n        label=\"实际完成额度\"\r\n        v-bind=\"layout\">\r\n        <a-input\r\n          type=\"decimal(13,2)\"\r\n          addonAfter=\"元\"\r\n          v-decorator=\"[\r\n            'completion_quota',\r\n            {\r\n              rules: [\r\n                { max:128, message: '长度在128个汉字以内' }\r\n              ],\r\n              validateTrigger: 'blur',\r\n              initialValue: record ? record.completion_quota : null\r\n            }\r\n          ]\">\r\n        </a-input>\r\n      </a-form-item>\r\n      <a-form-item\r\n        label=\"备注\"\r\n        v-bind=\"layout\">\r\n        <a-textarea\r\n          placeholder=\"请输入备注（不多于120字）\"\r\n          :rows=\"4\"\r\n          v-decorator=\"[\r\n            'explain',\r\n            {rules: [\r\n              {max:120, message:'长度在120个汉字以内'}\r\n            ],\r\n            validateTrigger: 'blur',\r\n            initialValue: record ? record.explain : null}\r\n          ]\"></a-textarea>\r\n      </a-form-item>\r\n    </a-form>\r\n    </a-modal>\r\n</template>\r\n\r\n<script>\r\n  import api from '../../../../../api/implement'\r\n  import { mapGetters } from 'vuex'\r\n  import moment from 'moment'\r\n\r\n  export default {\r\n    name: 'investTableModal',\r\n    props: {\r\n      record: Object,\r\n      visible: Boolean,\r\n      type: String,\r\n    },\r\n    data () {\r\n      return {\r\n        layout: {\r\n          'label-col': { span: 8 },\r\n          'wrapper-col': { span: 12 }\r\n        },\r\n        form: this.$form.createForm(this),\r\n        matter: {},\r\n        categoryList:[\r\n           {key:'1', label:'建筑工程费', value:'建筑工程费'},\r\n           {key:'2', label:'安装工程费',value:'安装工程费'},\r\n           {key:'3', label:'设备预置费',value:'设备预置费'},\r\n           {key:'4', label:'土地使用费和其他补偿费',value:'土地使用费和其他补偿费'},\r\n           {key:'5', label:'建设管理费',value:'建设管理费'},\r\n           {key:'7', label:'专项评价费',value:'专项评价费'},\r\n           {key:'8', label:'研究试验费',value:'研究试验费'},\r\n           {key:'10', label:'场地准备费和临时设施费',value:'场地准备费和临时设施费'},\r\n           {key:'12', label:'特殊设备安全监督检验费',value:'特殊设备安全监督检验费'},\r\n           {key:'14', label:'联合试运转费',value:'联合试运转费'},\r\n           {key:'15', label:'工程保险费',value:'工程保险费'},\r\n           {key:'16', label:'专利及专有技术使用费',value:'专利及专有技术使用费'},\r\n           {key:'17', label:'生产准备费',value:'生产准备费'},\r\n           {key:'18', label:'监理费',value:'监理费'},\r\n           {key:'19', label:'造价咨询',value:'造价咨询'},\r\n           {key:'21', label:'其他',value:'其他'},\r\n           {key:'22', label:'预备费',value:'预备费'},\r\n           {key:'23', label:'增值税',value:'增值税'},\r\n           {key:'24', label:'资金筹措费',value:'资金筹措费'},\r\n           {key:'25', label:'流动资金',value:'流动资金'}\r\n        ]\r\n      }\r\n    },\r\n    mounted () {\r\n      this.getData()\r\n    },\r\n    methods: {\r\n      ...mapGetters(['projectSelected']),\r\n      getData () {\r\n        if (this.isEdit) {\r\n          if (this.record.start_time !== null) {\r\n            this.record.start_time = new moment(this.record.start_time)\r\n          }\r\n          if (this.record.end_time !== null) {\r\n            this.record.end_time = new moment(this.record.end_time)\r\n          }\r\n        }\r\n      },\r\n      handleOk () {\r\n        this.form.validateFields((error, data) => {\r\n            if (!error) {\r\n              if (data.start_time != null) {\r\n                data.start_time = data.start_time.format('YYYY-MM-DD')\r\n              }\r\n              if (data.end_time != null) {\r\n                data.end_time = data.end_time.format('YYYY-MM-DD')\r\n              }\r\n            }\r\n            if (this.isEdit) {\r\n              api.updateTotalInvest(this.record.total_investment_id, data)\r\n                .then(data => {\r\n                  this.$notification.success({ message: '成功', description: '更新成功', key: 'SUCCESS' })\r\n                  this.$emit('close')\r\n                })\r\n            } else {\r\n              api.createTotalInvest(this.$store.getters.projectSelected.id, data)\r\n                .then(data => {\r\n                  this.$notification.success({ message: '成功', description: '新建成功', key: 'SUCCESS' })\r\n                  this.$emit('close')\r\n                })\r\n            }\r\n          }\r\n        )\r\n      },\r\n      handleCancel () {\r\n        this.$emit('close')\r\n      }\r\n\r\n    },\r\n    computed: {\r\n      isEdit () {\r\n        return this.type === 'edit'\r\n      }\r\n      ,\r\n      title () {\r\n        return this.isEdit ? '编辑' : '新建'\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}