{"remainingRequest":"E:\\ConstructionConsultationSystem\\Frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ConstructionConsultationSystem\\Frontend\\src\\views\\detail\\Contact.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\ConstructionConsultationSystem\\Frontend\\src\\views\\detail\\Contact.vue","mtime":1557326111206},{"path":"E:\\ConstructionConsultationSystem\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ConstructionConsultationSystem\\Frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\ConstructionConsultationSystem\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ConstructionConsultationSystem\\Frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nconst columns = [\n  {\n    title: '单位',\n    dataIndex: 'company',\n    width: '10%',\n    align:'center'\n  },\n  {\n    title: '单位类型',\n    dataIndex: 'company_type.label',\n    width: '14%',\n    align:'center'\n  },\n  {\n    title: '姓名',\n    dataIndex: 'name',\n    width: '8%',\n    align:'center'\n  },\n  {\n    title: '岗位',\n    dataIndex: 'job',\n    width: '10%',\n    align:'center'\n  },\n  {\n    title: '邮箱',\n    dataIndex: 'email',\n    width: '17%',\n    align:'center'\n  },\n  {\n    title: '联系电话',\n    dataIndex: 'telephone',\n    width: '15%',\n    align:'center'\n  },\n  {\n    title: '备注',\n    dataIndex: 'note',\n    width: '13%',\n    align:'center'\n  },\n  {\n    title: '编辑',\n    dataIndex: 'operation',\n    align:'center',\n    scopedSlots: { customRender: 'operation' }\n  }\n]\nimport api from '../../api/detail'\nimport ContactModal from './components/ContactModal'\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'RelatedCompany',\n  components: {\n    ContactModal\n  },\n  data () {\n    return {\n      params: {\n        search: '',\n        page: 1,\n        ordering: '-company',\n        company_type: '',\n        project_id:this.projectSelected().id\n      },\n      modal: {\n        record: null,\n        visible: false,\n        type: '1'\n      },\n      typeList: [],\n      count:0,\n      data: [],\n      columns\n    }\n  },\n  mounted () {\n    api.getTypeList()\n      .then(data => {\n      this.typeList = data\n    })\n    this.getData()\n  },\n  methods: {\n    ...mapGetters(['projectSelected']),\n    handleClearParams () {\n      this.params.ordering = 'company'\n      this.params.search = ''\n      this.params.page = 1\n      this.params.company_type = ''\n      this.getData()\n    },\n    handelePage (page) {\n      this.params.page = page\n      this.getData()\n    },\n    getData () {\n      api.getAddressList(this.params)\n        .then(data => {\n        this.data = data.results\n        this.count = data.count\n      })\n    },\n    handleClose () {\n      this.modal.type = ''\n      this.modal.record = null\n      this.modal.visible = false\n      this.getData()\n    },\n    handleCreate () {\n      this.modal.type = 'create'\n      this.modal.record = null\n      this.modal.visible = true\n    },\n    handleEdit (record) {\n      this.modal.type = 'edit'\n      this.modal.record = record\n      this.modal.visible = true\n    },\n    handleDelete (record) {\n      api.deleteAddressListDetail(record.id)\n        .then(data=>{\n          this.$notification.success({message: '成功', description: '删除成功', key: 'SUCCESS'})\n      })\n      this.getData()\n    }\n  }\n}\n",{"version":3,"sources":["Contact.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Contact.vue","sourceRoot":"src/views/detail","sourcesContent":["<template>\r\n  <div>\r\n    <contact-modal\r\n      :record=\"modal.record\"\r\n      :visible=\"modal.visible\"\r\n      :type=\"modal.type\"\r\n      v-if=\"modal.visible\"\r\n      @close=\"handleClose()\">\r\n    </contact-modal>\r\n    <a-card>\r\n      <a-input-group class=\"tool\">\r\n        <a-row :gutter=\"6\">\r\n          <a-col\r\n            class=\"item\"\r\n            :xs=\"{ span: 12 }\"\r\n            :sm=\"{ span: 8 }\"\r\n            :xl=\"{ span: 4 }\">\r\n            <a-select\r\n              v-model=\"params.ordering\"\r\n              style=\"width: 100%\"\r\n              @change=\"getData()\">\r\n              <a-select-option value=\"\">排序</a-select-option>\r\n              <a-select-option value=\"company\">单位正排序</a-select-option>\r\n              <a-select-option value=\"-company\">单位倒排序</a-select-option>\r\n              <a-select-option value=\"name\">姓名正排序</a-select-option>\r\n              <a-select-option value=\"-name\">姓名倒排序</a-select-option>\r\n            </a-select>\r\n          </a-col>\r\n          <a-col\r\n            class=\"item\"\r\n            :xs=\"{ span: 12 }\"\r\n            :sm=\"{ span: 8 }\"\r\n            :xl=\"{ span: 4 }\">\r\n            <a-select\r\n              v-model=\"params.company_type\"\r\n              style=\"width: 100%\"\r\n              @change=\"getData()\">\r\n              <a-select-option value=\"\">类型筛选</a-select-option>\r\n              <a-select-option :value=\"item.value\" v-for=\"item in typeList\">{{item.label}}</a-select-option>\r\n            </a-select>\r\n          </a-col>\r\n          <a-col\r\n            class=\"item\"\r\n            :xs=\"{ span: 12 }\"\r\n            :sm=\"{ span: 8 }\"\r\n            :xl=\"{ span: 4 }\">\r\n            <a-input\r\n              v-model=\"params.search\"\r\n              style=\"width: 100%\"\r\n              placeholder=\"单位，姓名，岗位\">\r\n            </a-input>\r\n          </a-col>\r\n          <a-col\r\n            class=\"item\"\r\n            :xs=\"{ span: 12 }\"\r\n            :sm=\"{ span: 8 }\"\r\n            :xl=\"{ span: 4 }\">\r\n            <a-button\r\n              style=\"width: 100%\"\r\n              icon=\"search\"\r\n              @click=\"getData()\">\r\n              搜索\r\n            </a-button>\r\n          </a-col>\r\n          <a-col\r\n            class=\"item\"\r\n            :xs=\"{ span: 12 }\"\r\n            :sm=\"{ span: 8 }\"\r\n            :xl=\"{ span: 4 }\">\r\n            <a-button\r\n              style=\"width: 100%\"\r\n              icon=\"delete\"\r\n              @click=\"handleClearParams()\">\r\n              重置\r\n            </a-button>\r\n          </a-col>\r\n          <a-col\r\n            class=\"item\"\r\n            :xs=\"{ span: 12 }\"\r\n            :sm=\"{ span: 8 }\"\r\n            :xl=\"{ span: 4 }\">\r\n            <a-button\r\n              type=\"primary\"\r\n              icon=\"plus\"\r\n              style=\"width: 100%\"\r\n              @click=\"handleCreate()\">\r\n              新建\r\n            </a-button>\r\n          </a-col>\r\n        </a-row>\r\n      </a-input-group>\r\n      <a-table\r\n        bordered\r\n        :columns=\"columns\"\r\n        :dataSource=\"data\"\r\n        rowKey=\"id\"\r\n        :pagination=\"false\">\r\n        <template slot=\"operation\" slot-scope=\"text, record, index\">\r\n          <a-button class=\"button\" @click=\"handleEdit(record)\">编辑</a-button>\r\n          <a-popconfirm\r\n            title=\"确认删除吗?\"\r\n            @confirm=\"handleDelete(record)\">\r\n            <a-button class=\"button\" type=\"danger\">删除</a-button>\r\n          </a-popconfirm>\r\n        </template>\r\n      </a-table>\r\n      <a-pagination\r\n        v-model=\"params.page\"\r\n        @change=\"handelePage\"\r\n        style=\"float: right\"\r\n        :total=\"count\">\r\n      </a-pagination>\r\n    </a-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n  const columns = [\r\n    {\r\n      title: '单位',\r\n      dataIndex: 'company',\r\n      width: '10%',\r\n      align:'center'\r\n    },\r\n    {\r\n      title: '单位类型',\r\n      dataIndex: 'company_type.label',\r\n      width: '14%',\r\n      align:'center'\r\n    },\r\n    {\r\n      title: '姓名',\r\n      dataIndex: 'name',\r\n      width: '8%',\r\n      align:'center'\r\n    },\r\n    {\r\n      title: '岗位',\r\n      dataIndex: 'job',\r\n      width: '10%',\r\n      align:'center'\r\n    },\r\n    {\r\n      title: '邮箱',\r\n      dataIndex: 'email',\r\n      width: '17%',\r\n      align:'center'\r\n    },\r\n    {\r\n      title: '联系电话',\r\n      dataIndex: 'telephone',\r\n      width: '15%',\r\n      align:'center'\r\n    },\r\n    {\r\n      title: '备注',\r\n      dataIndex: 'note',\r\n      width: '13%',\r\n      align:'center'\r\n    },\r\n    {\r\n      title: '编辑',\r\n      dataIndex: 'operation',\r\n      align:'center',\r\n      scopedSlots: { customRender: 'operation' }\r\n    }\r\n  ]\r\n  import api from '../../api/detail'\r\n  import ContactModal from './components/ContactModal'\r\n  import { mapGetters } from 'vuex'\r\n\r\n  export default {\r\n    name: 'RelatedCompany',\r\n    components: {\r\n      ContactModal\r\n    },\r\n    data () {\r\n      return {\r\n        params: {\r\n          search: '',\r\n          page: 1,\r\n          ordering: '-company',\r\n          company_type: '',\r\n          project_id:this.projectSelected().id\r\n        },\r\n        modal: {\r\n          record: null,\r\n          visible: false,\r\n          type: '1'\r\n        },\r\n        typeList: [],\r\n        count:0,\r\n        data: [],\r\n        columns\r\n      }\r\n    },\r\n    mounted () {\r\n      api.getTypeList()\r\n        .then(data => {\r\n        this.typeList = data\r\n      })\r\n      this.getData()\r\n    },\r\n    methods: {\r\n      ...mapGetters(['projectSelected']),\r\n      handleClearParams () {\r\n        this.params.ordering = 'company'\r\n        this.params.search = ''\r\n        this.params.page = 1\r\n        this.params.company_type = ''\r\n        this.getData()\r\n      },\r\n      handelePage (page) {\r\n        this.params.page = page\r\n        this.getData()\r\n      },\r\n      getData () {\r\n        api.getAddressList(this.params)\r\n          .then(data => {\r\n          this.data = data.results\r\n          this.count = data.count\r\n        })\r\n      },\r\n      handleClose () {\r\n        this.modal.type = ''\r\n        this.modal.record = null\r\n        this.modal.visible = false\r\n        this.getData()\r\n      },\r\n      handleCreate () {\r\n        this.modal.type = 'create'\r\n        this.modal.record = null\r\n        this.modal.visible = true\r\n      },\r\n      handleEdit (record) {\r\n        this.modal.type = 'edit'\r\n        this.modal.record = record\r\n        this.modal.visible = true\r\n      },\r\n      handleDelete (record) {\r\n        api.deleteAddressListDetail(record.id)\r\n          .then(data=>{\r\n            this.$notification.success({message: '成功', description: '删除成功', key: 'SUCCESS'})\r\n        })\r\n        this.getData()\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .tool {\r\n    .item {\r\n      margin-bottom: 16px;\r\n    }\r\n  }\r\n   .button {\r\n      margin-bottom: 16px;\r\n    }\r\n</style>"]}]}