{"remainingRequest":"E:\\项目\\FoodProductManageSystem\\Frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\项目\\FoodProductManageSystem\\Frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\项目\\FoodProductManageSystem\\Frontend\\src\\store\\modules\\user.js","dependencies":[{"path":"E:\\项目\\FoodProductManageSystem\\Frontend\\src\\store\\modules\\user.js","mtime":1557660160384},{"path":"E:\\项目\\FoodProductManageSystem\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\项目\\FoodProductManageSystem\\Frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\项目\\FoodProductManageSystem\\Frontend\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport _Promise from \"E:\\\\\\u9879\\u76EE\\\\FoodProductManageSystem\\\\Frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/promise\";\nimport api from '../../api/user';\nvar user = {\n  state: {\n    id: '',\n    username: '',\n    role: []\n  },\n  mutations: {\n    SET_ID: function SET_ID(state, id) {\n      state.id = id;\n    },\n    SET_USERNAME: function SET_USERNAME(state, username) {\n      state.username = username;\n    },\n    SET_ROLE: function SET_ROLE(state, role) {\n      state.role = role;\n    }\n  },\n  actions: {\n    // 登录\n    Login: function Login(_ref, user) {\n      var commit = _ref.commit;\n      return api.login(user.username, user.password);\n    },\n    // 获取用户信息\n    GetInfo: function GetInfo(_ref2) {\n      var commit = _ref2.commit;\n      return new _Promise(function (resolve, reject) {\n        api.getInfo().then(function (response) {\n          var result = response;\n\n          if (result.role && result.role.permissions.length > 0) {\n            var role = result.role;\n            role.permissions = result.role.permissions;\n            role.permissions.map(function (per) {\n              if (per.actions != null && per.actions.length > 0) {\n                per.actionList = per.actions.map(function (action) {\n                  return action.name;\n                });\n              }\n            });\n            role.permissionList = role.permissions.map(function (permission) {\n              return permission.name;\n            });\n            commit('SET_ROLE', result.role);\n            commit('SET_ID', result.id);\n            commit('SET_USERNAME', result.username);\n          } else {\n            reject(new Error('getInfo: roles must be a non-null array !'));\n          }\n\n          resolve(response);\n        });\n      });\n    },\n    // 登出\n    Logout: function Logout(_ref3) {\n      var commit = _ref3.commit;\n      return new _Promise(function (resolve) {\n        commit('SET_ID', '');\n        commit('SET_USERNAME', '');\n        commit('SET_ROLE', []);\n        api.logout().then(function () {\n          resolve();\n        });\n      });\n    }\n  }\n};\nexport default user;",{"version":3,"sources":["E:\\项目\\FoodProductManageSystem\\Frontend\\src\\store\\modules\\user.js"],"names":["api","user","state","id","username","role","mutations","SET_ID","SET_USERNAME","SET_ROLE","actions","Login","commit","login","password","GetInfo","resolve","reject","getInfo","then","response","result","permissions","length","map","per","actionList","action","name","permissionList","permission","Error","Logout","logout"],"mappings":"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","sourcesContent":["import api from '../../api/user'\r\n\r\nconst user = {\r\n  state: {\r\n    id: '',\r\n    username: '',\r\n    role: []\r\n  },\r\n  mutations: {\r\n    SET_ID: (state, id) => {\r\n      state.id = id\r\n    },\r\n    SET_USERNAME: (state, username) => {\r\n      state.username = username\r\n    },\r\n    SET_ROLE: (state, role) => {\r\n      state.role = role\r\n    }\r\n  },\r\n  actions: {\r\n    // 登录\r\n    Login ({ commit }, user) {\r\n      return api.login(user.username, user.password)\r\n    },\r\n\r\n    // 获取用户信息\r\n    GetInfo ({ commit }) {\r\n      return new Promise((resolve, reject) => {\r\n        api.getInfo().then(response => {\r\n          const result = response\r\n          if (result.role && result.role.permissions.length > 0) {\r\n            const role = result.role\r\n            role.permissions = result.role.permissions\r\n            role.permissions.map(per => {\r\n              if (per.actions != null && per.actions.length > 0) {\r\n                per.actionList = per.actions.map(action => {\r\n                  return action.name\r\n                })\r\n              }\r\n            })\r\n            role.permissionList = role.permissions.map(permission => {\r\n              return permission.name\r\n            })\r\n            commit('SET_ROLE', result.role)\r\n            commit('SET_ID', result.id)\r\n            commit('SET_USERNAME', result.username)\r\n          } else {\r\n            reject(new Error('getInfo: roles must be a non-null array !'))\r\n          }\r\n          resolve(response)\r\n        })\r\n      })\r\n    },\r\n\r\n    // 登出\r\n    Logout ({ commit }) {\r\n      return new Promise((resolve) => {\r\n        commit('SET_ID', '')\r\n        commit('SET_USERNAME', '')\r\n        commit('SET_ROLE', [])\r\n        api.logout().then(() => {\r\n          resolve()\r\n        })\r\n      })\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport default user\r\n"]}]}