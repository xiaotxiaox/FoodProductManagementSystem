{"remainingRequest":"E:\\项目\\FoodProductManageSystem\\Frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\项目\\FoodProductManageSystem\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\项目\\FoodProductManageSystem\\Frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\项目\\FoodProductManageSystem\\Frontend\\src\\views\\implement\\security\\Security.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\项目\\FoodProductManageSystem\\Frontend\\src\\views\\implement\\security\\Security.vue","mtime":1573727175195},{"path":"E:\\项目\\FoodProductManageSystem\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\项目\\FoodProductManageSystem\\Frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\项目\\FoodProductManageSystem\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\项目\\FoodProductManageSystem\\Frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"E:\\\\\\u9879\\u76EE\\\\FoodProductManageSystem\\\\Frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport echarts from 'echarts';\nimport SecurityModal from './components/SecurityModal';\nimport api from '../../../api/implement';\nimport { mapGetters } from 'vuex';\nimport ACol from 'ant-design-vue/es/grid/Col';\nimport ARow from 'ant-design-vue/es/grid/Row';\nimport moment from 'moment';\nvar columns = [{\n  title: '序号',\n  dataIndex: 'risk_id',\n  scopedSlots: {\n    customRender: 'risk_id'\n  },\n  width: '10%',\n  align: 'center'\n}, {\n  title: '内容',\n  dataIndex: 'risk_content',\n  width: '20%',\n  align: 'center'\n}, {\n  title: '部位',\n  dataIndex: 'part',\n  width: '15%',\n  align: 'center'\n}, {\n  title: '附件',\n  dataIndex: 'files',\n  scopedSlots: {\n    customRender: 'files'\n  },\n  width: '15%',\n  align: 'center'\n}, {\n  title: '风险等级',\n  dataIndex: 'risk_rank',\n  width: '18%',\n  align: 'center'\n}, {\n  title: '检查结果',\n  dataIndex: 'result',\n  width: '18%',\n  align: 'center'\n}]; // {\n//   title: '编辑',\n//   dataIndex: 'operation',\n//   scopedSlots: { customRender: 'operation' },\n//   align: 'center'\n// }]\n// const columnHead = [\n//   {\n//     title: '类别',\n//     dataIndex: 'type',\n//     width: '15%',\n//     align: 'center'\n//   },\n//   {\n//     title: '职位',\n//     dataIndex: 'position',\n//     width: '18%',\n//     align: 'center'\n//   },\n//   {\n//     title: '姓名',\n//     dataIndex: 'name',\n//     width: '20%',\n//     align: 'center'\n//   },\n//   {\n//     title: '联系电话',\n//     dataIndex: 'phone',\n//     width: '25%',\n//     align: 'center'\n//   },\n//   {\n//     title: '编辑',\n//     dataIndex: 'operation',\n//     scopedSlots: { customRender: 'operation' },\n//     align: 'center'\n//   }\n// ]\n\nexport default {\n  name: 'Security',\n  components: {\n    ARow: ARow,\n    ACol: ACol,\n    SecurityModal: SecurityModal\n  },\n  props: {\n    id: Number\n  },\n  data: function data() {\n    return {\n      status: {\n        listLoading: true,\n        tableLoading: true\n      },\n      charts: '',\n      opinion: ['已回复', '未回复'],\n      opinionData: [{\n        value: 40,\n        name: '已回复',\n        itemStyle: {\n          color: '#00b0f0'\n        }\n      }, {\n        value: 60,\n        name: '未回复',\n        itemStyle: {\n          color: '#7030a0'\n        }\n      }],\n      layout: {\n        'label-col': {\n          span: 6\n        },\n        'wrapper-col': {\n          span: 18\n        }\n      },\n      form: this.$form.createForm(this),\n      securityModal: {\n        record: null,\n        visible: false,\n        type: '1',\n        risk_id: this.id\n      },\n      columns: columns,\n      matterList: [],\n      project_id: this.projectSelected().id,\n      starting_date: '',\n      Days: ''\n    };\n  },\n  mounted: function mounted() {\n    this.$nextTick(function () {\n      this.drawPie('main');\n    });\n    this.getData();\n  },\n  methods: _objectSpread({}, mapGetters(['projectSelected']), {\n    getData: function getData() {\n      var _this = this;\n\n      this.status.listLoading = false;\n      this.status.tableLoading = false;\n      api.getSecurityList(this.project_id).then(function (data) {\n        _this.matterList = data;\n        _this.status.listLoading = false;\n      });\n      api.getStartDate(this.project_id).then(function (data) {\n        _this.status.listLoading = false;\n        _this.starting_date = data.starting_date;\n        var today = new moment();\n        var starting_day = new moment(_this.starting_date);\n        _this.Days = \"\".concat(today.diff(starting_day, 'days') + 1, \" \");\n      });\n      api.getSecurityNotice(this.project_id).then(function (data) {\n        _this.not_num = data.not_num;\n        _this.reply_num = data.reply_num;\n        _this.opinionData[0].value = _this.reply_num;\n        _this.opinionData[1].value = _this.not_num;\n\n        _this.$nextTick(function () {\n          this.drawPie('main');\n        });\n      }); // api.getSecurityHeadList(this.project_id)\n      //   .then(data => {\n      //     this.headList = data\n      //     this.status.tableLoading = false\n      //     console.log(1)\n      //   })\n    },\n    drawPie: function drawPie(id) {\n      this.charts = echarts.init(document.getElementById(id));\n      this.charts.setOption({\n        tooltip: {\n          trigger: 'item'\n        },\n        legend: {\n          orient: 'vertical',\n          x: 'left',\n          data: this.opinion\n        },\n        series: [{\n          name: '数量',\n          type: 'pie',\n          radius: ['0%', '70%'],\n          avoidLabelOverlap: false,\n          label: {\n            normal: {\n              show: true,\n              position: 'inside'\n            },\n            emphasis: {\n              show: true,\n              textStyle: {\n                fontSize: '30',\n                fontWeight: 'bold'\n              }\n            }\n          },\n          labelLine: {\n            normal: {\n              show: false\n            }\n          },\n          data: this.opinionData\n        }]\n      });\n    },\n    handleSecurityClose: function handleSecurityClose() {\n      this.securityModal.type = '';\n      this.securityModal.record = null;\n      this.securityModal.visible = false;\n      this.getData();\n    },\n    handleSecurityCreate: function handleSecurityCreate() {\n      this.securityModal.type = 'create';\n      this.securityModal.record = null;\n      this.securityModal.visible = true;\n    },\n    handleSecurityEdit: function handleSecurityEdit(record) {\n      this.securityModal.type = 'edit';\n      this.securityModal.record = record;\n      this.securityModal.visible = true;\n    },\n    handleSecurityDelete: function handleSecurityDelete(record) {\n      var _this2 = this;\n\n      api.deleteSecurity(record.risk_id).then(function (data) {\n        _this2.$notification.success({\n          message: '成功',\n          description: '删除成功',\n          key: 'SUCCESS'\n        });\n      });\n    }\n  })\n};",{"version":3,"sources":["Security.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA,OAAA,OAAA,MAAA,SAAA;AACA,OAAA,aAAA,MAAA,4BAAA;AACA,OAAA,GAAA,MAAA,wBAAA;AACA,SAAA,UAAA,QAAA,MAAA;AACA,OAAA,IAAA,MAAA,4BAAA;AACA,OAAA,IAAA,MAAA,4BAAA;AACA,OAAA,MAAA,MAAA,QAAA;AAEA,IAAA,OAAA,GAAA,CACA;AACA,EAAA,KAAA,EAAA,IADA;AAEA,EAAA,SAAA,EAAA,SAFA;AAGA,EAAA,WAAA,EAAA;AAAA,IAAA,YAAA,EAAA;AAAA,GAHA;AAIA,EAAA,KAAA,EAAA,KAJA;AAKA,EAAA,KAAA,EAAA;AALA,CADA,EAQA;AACA,EAAA,KAAA,EAAA,IADA;AAEA,EAAA,SAAA,EAAA,cAFA;AAGA,EAAA,KAAA,EAAA,KAHA;AAIA,EAAA,KAAA,EAAA;AAJA,CARA,EAcA;AACA,EAAA,KAAA,EAAA,IADA;AAEA,EAAA,SAAA,EAAA,MAFA;AAGA,EAAA,KAAA,EAAA,KAHA;AAIA,EAAA,KAAA,EAAA;AAJA,CAdA,EAoBA;AACA,EAAA,KAAA,EAAA,IADA;AAEA,EAAA,SAAA,EAAA,OAFA;AAGA,EAAA,WAAA,EAAA;AAAA,IAAA,YAAA,EAAA;AAAA,GAHA;AAIA,EAAA,KAAA,EAAA,KAJA;AAKA,EAAA,KAAA,EAAA;AALA,CApBA,EA4BA;AACA,EAAA,KAAA,EAAA,MADA;AAEA,EAAA,SAAA,EAAA,WAFA;AAGA,EAAA,KAAA,EAAA,KAHA;AAIA,EAAA,KAAA,EAAA;AAJA,CA5BA,EAkCA;AACA,EAAA,KAAA,EAAA,MADA;AAEA,EAAA,SAAA,EAAA,QAFA;AAGA,EAAA,KAAA,EAAA,KAHA;AAIA,EAAA,KAAA,EAAA;AAJA,CAlCA,CAAA,C,CAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,IAAA,EAAA,IADA;AAEA,IAAA,IAAA,EAAA,IAFA;AAGA,IAAA,aAAA,EAAA;AAHA,GAFA;AAOA,EAAA,KAAA,EAAA;AACA,IAAA,EAAA,EAAA;AADA,GAPA;AAUA,EAAA,IAVA,kBAUA;AACA,WAAA;AACA,MAAA,MAAA,EAAA;AACA,QAAA,WAAA,EAAA,IADA;AAEA,QAAA,YAAA,EAAA;AAFA,OADA;AAKA,MAAA,MAAA,EAAA,EALA;AAMA,MAAA,OAAA,EAAA,CAAA,KAAA,EAAA,KAAA,CANA;AAOA,MAAA,WAAA,EAAA,CACA;AAAA,QAAA,KAAA,EAAA,EAAA;AAAA,QAAA,IAAA,EAAA,KAAA;AAAA,QAAA,SAAA,EAAA;AAAA,UAAA,KAAA,EAAA;AAAA;AAAA,OADA,EAEA;AAAA,QAAA,KAAA,EAAA,EAAA;AAAA,QAAA,IAAA,EAAA,KAAA;AAAA,QAAA,SAAA,EAAA;AAAA,UAAA,KAAA,EAAA;AAAA;AAAA,OAFA,CAPA;AAWA,MAAA,MAAA,EAAA;AACA,qBAAA;AAAA,UAAA,IAAA,EAAA;AAAA,SADA;AAEA,uBAAA;AAAA,UAAA,IAAA,EAAA;AAAA;AAFA,OAXA;AAeA,MAAA,IAAA,EAAA,KAAA,KAAA,CAAA,UAAA,CAAA,IAAA,CAfA;AAgBA,MAAA,aAAA,EAAA;AACA,QAAA,MAAA,EAAA,IADA;AAEA,QAAA,OAAA,EAAA,KAFA;AAGA,QAAA,IAAA,EAAA,GAHA;AAIA,QAAA,OAAA,EAAA,KAAA;AAJA,OAhBA;AAsBA,MAAA,OAAA,EAAA,OAtBA;AAuBA,MAAA,UAAA,EAAA,EAvBA;AAwBA,MAAA,UAAA,EAAA,KAAA,eAAA,GAAA,EAxBA;AAyBA,MAAA,aAAA,EAAA,EAzBA;AA0BA,MAAA,IAAA,EAAA;AA1BA,KAAA;AA4BA,GAvCA;AAwCA,EAAA,OAxCA,qBAwCA;AACA,SAAA,SAAA,CAAA,YAAA;AACA,WAAA,OAAA,CAAA,MAAA;AACA,KAFA;AAGA,SAAA,OAAA;AACA,GA7CA;AA8CA,EAAA,OAAA,oBACA,UAAA,CAAA,CAAA,iBAAA,CAAA,CADA;AAEA,IAAA,OAFA,qBAEA;AAAA;;AACA,WAAA,MAAA,CAAA,WAAA,GAAA,KAAA;AACA,WAAA,MAAA,CAAA,YAAA,GAAA,KAAA;AACA,MAAA,GAAA,CAAA,eAAA,CAAA,KAAA,UAAA,EACA,IADA,CACA,UAAA,IAAA,EAAA;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,IAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,WAAA,GAAA,KAAA;AACA,OAJA;AAKA,MAAA,GAAA,CAAA,YAAA,CAAA,KAAA,UAAA,EACA,IADA,CACA,UAAA,IAAA,EAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,WAAA,GAAA,KAAA;AACA,QAAA,KAAA,CAAA,aAAA,GAAA,IAAA,CAAA,aAAA;AACA,YAAA,KAAA,GAAA,IAAA,MAAA,EAAA;AACA,YAAA,YAAA,GAAA,IAAA,MAAA,CAAA,KAAA,CAAA,aAAA,CAAA;AACA,QAAA,KAAA,CAAA,IAAA,aAAA,KAAA,CAAA,IAAA,CAAA,YAAA,EAAA,MAAA,IAAA,CAAA;AACA,OAPA;AAQA,MAAA,GAAA,CAAA,iBAAA,CAAA,KAAA,UAAA,EACA,IADA,CACA,UAAA,IAAA,EAAA;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,IAAA,CAAA,OAAA;AACA,QAAA,KAAA,CAAA,SAAA,GAAA,IAAA,CAAA,SAAA;AACA,QAAA,KAAA,CAAA,WAAA,CAAA,CAAA,EAAA,KAAA,GAAA,KAAA,CAAA,SAAA;AACA,QAAA,KAAA,CAAA,WAAA,CAAA,CAAA,EAAA,KAAA,GAAA,KAAA,CAAA,OAAA;;AACA,QAAA,KAAA,CAAA,SAAA,CAAA,YAAA;AACA,eAAA,OAAA,CAAA,MAAA;AACA,SAFA;AAGA,OATA,EAhBA,CA0BA;AACA;AACA;AACA;AACA;AACA;AACA,KAlCA;AAmCA,IAAA,OAnCA,mBAmCA,EAnCA,EAmCA;AACA,WAAA,MAAA,GAAA,OAAA,CAAA,IAAA,CAAA,QAAA,CAAA,cAAA,CAAA,EAAA,CAAA,CAAA;AACA,WAAA,MAAA,CAAA,SAAA,CAAA;AACA,QAAA,OAAA,EAAA;AACA,UAAA,OAAA,EAAA;AADA,SADA;AAIA,QAAA,MAAA,EAAA;AACA,UAAA,MAAA,EAAA,UADA;AAEA,UAAA,CAAA,EAAA,MAFA;AAGA,UAAA,IAAA,EAAA,KAAA;AAHA,SAJA;AASA,QAAA,MAAA,EAAA,CACA;AACA,UAAA,IAAA,EAAA,IADA;AAEA,UAAA,IAAA,EAAA,KAFA;AAGA,UAAA,MAAA,EAAA,CAAA,IAAA,EAAA,KAAA,CAHA;AAIA,UAAA,iBAAA,EAAA,KAJA;AAKA,UAAA,KAAA,EAAA;AACA,YAAA,MAAA,EAAA;AACA,cAAA,IAAA,EAAA,IADA;AAEA,cAAA,QAAA,EAAA;AAFA,aADA;AAKA,YAAA,QAAA,EAAA;AACA,cAAA,IAAA,EAAA,IADA;AAEA,cAAA,SAAA,EAAA;AACA,gBAAA,QAAA,EAAA,IADA;AAEA,gBAAA,UAAA,EAAA;AAFA;AAFA;AALA,WALA;AAkBA,UAAA,SAAA,EAAA;AACA,YAAA,MAAA,EAAA;AACA,cAAA,IAAA,EAAA;AADA;AADA,WAlBA;AAuBA,UAAA,IAAA,EAAA,KAAA;AAvBA,SADA;AATA,OAAA;AAqCA,KA1EA;AA2EA,IAAA,mBA3EA,iCA2EA;AACA,WAAA,aAAA,CAAA,IAAA,GAAA,EAAA;AACA,WAAA,aAAA,CAAA,MAAA,GAAA,IAAA;AACA,WAAA,aAAA,CAAA,OAAA,GAAA,KAAA;AACA,WAAA,OAAA;AACA,KAhFA;AAiFA,IAAA,oBAjFA,kCAiFA;AACA,WAAA,aAAA,CAAA,IAAA,GAAA,QAAA;AACA,WAAA,aAAA,CAAA,MAAA,GAAA,IAAA;AACA,WAAA,aAAA,CAAA,OAAA,GAAA,IAAA;AACA,KArFA;AAsFA,IAAA,kBAtFA,8BAsFA,MAtFA,EAsFA;AACA,WAAA,aAAA,CAAA,IAAA,GAAA,MAAA;AACA,WAAA,aAAA,CAAA,MAAA,GAAA,MAAA;AACA,WAAA,aAAA,CAAA,OAAA,GAAA,IAAA;AACA,KA1FA;AA2FA,IAAA,oBA3FA,gCA2FA,MA3FA,EA2FA;AAAA;;AACA,MAAA,GAAA,CAAA,cAAA,CAAA,MAAA,CAAA,OAAA,EACA,IADA,CACA,UAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,aAAA,CAAA,OAAA,CAAA;AAAA,UAAA,OAAA,EAAA,IAAA;AAAA,UAAA,WAAA,EAAA,MAAA;AAAA,UAAA,GAAA,EAAA;AAAA,SAAA;AACA,OAHA;AAIA;AAhGA;AA9CA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n    <a-card style=\"margin-bottom: 16px\">\r\n      <a-row>\r\n        <a-col\r\n          :xs=\"{ span: 24 }\"\r\n          :sm=\"{ span: 12 }\"\r\n          :xl=\"{ span: 12 }\">\r\n          <a-col style=\"text-align: center\"\r\n                 :xs=\"{ span: 24 }\"\r\n                 :sm=\"{ span: 16,offset:4 }\"\r\n                 :xl=\"{ span: 17,offset:4}\">\r\n            <a-row>\r\n              <iframe name=\"weather_inc\" src=\"http://i.tianqi.com/index.php?c=code&id=55\"\r\n                      style=\"border:solid 1px #7ec8ea\" height=\"300\" frameborder=\"0\" marginwidth=\"0\" marginheight=\"0\"\r\n                      scrolling=\"no\"></iframe>\r\n            </a-row>\r\n            <a-row>\r\n              <a-card title=\"安全生产\" :bordered=true>\r\n                <p style=\"text-align: center\">{{Days}}天</p>\r\n              </a-card>\r\n            </a-row>\r\n          </a-col>\r\n        </a-col>\r\n        <a-col\r\n          :xs=\"{ span: 24 }\"\r\n          :sm=\"{ span: 12 }\"\r\n          :xl=\"{ span: 12 }\">\r\n          <div id=\"app\">\r\n            <div id=\"main\" style=\"width: 100%; height: 450px;\"></div>\r\n          </div>\r\n        </a-col>\r\n      </a-row>\r\n    </a-card>\r\n    <security-modal\r\n      :record=\"securityModal.record\"\r\n      :visible=\"securityModal.visible\"\r\n      :type=\"securityModal.type\"\r\n      :table_id=\"securityModal.risk_id\"\r\n      v-if=\"securityModal.visible\"\r\n      @close=\"handleSecurityClose()\">\r\n    </security-modal>\r\n    <a-card style=\"margin-bottom: 16px\">\r\n      <a-row style=\"margin-bottom: 5px\">\r\n        <a-col\r\n          class=\"item\"\r\n          :xs=\"{ span: 24 }\"\r\n          :sm=\"{ span: 12 ,offset:12}\"\r\n          :xl=\"{ span: 4 ,offset:20}\">\r\n          <!--<a-button-->\r\n            <!--type=\"primary\"-->\r\n            <!--icon=\"plus\"-->\r\n            <!--style=\"width: 100%\"-->\r\n            <!--@click=\"handleSecurityCreate()\">-->\r\n            <!--新建-->\r\n          <!--</a-button>-->\r\n        </a-col>\r\n      </a-row>\r\n      <a-spin :spinning=\"status.listLoading\">\r\n        <a-table\r\n          bordered\r\n          :columns=\"columns\"\r\n          :dataSource=\"matterList\"\r\n          rowKey=\"risk_id\"\r\n          :pagination=\"false\">\r\n          <template slot=\"risk_id\" slot-scope=\"text, record, index\">\r\n            <div>{{index+1}}</div>\r\n          </template>\r\n          <template slot=\"files\" slot-scope=\"text, record, index\">\r\n            <a-button @click=\"$router.push({'name': 'implementSecurityDetail', params: {id: record.risk_id}})\">\r\n              附件管理\r\n            </a-button>\r\n          </template>\r\n          <!--<template slot=\"operation\" slot-scope=\"text, record, index\">-->\r\n            <!--<a-button @click=\"handleSecurityEdit(record)\">编辑</a-button>-->\r\n            <!--<a-popconfirm-->\r\n              <!--title=\"确认删除吗?\"-->\r\n              <!--@confirm=\"handleSecurityDelete(record)\">-->\r\n              <!--<a-button type=\"danger\">删除</a-button>-->\r\n            <!--</a-popconfirm>-->\r\n          <!--</template>-->\r\n        </a-table>\r\n      </a-spin>\r\n      <a-col\r\n        :xs=\"{span: 24}\"\r\n        :sm=\"{span: 20, offset: 2}\"\r\n        :xl=\"{span: 16, offset: 4}\">\r\n      </a-col>\r\n    </a-card>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport echarts from 'echarts'\r\nimport SecurityModal from './components/SecurityModal'\r\nimport api from '../../../api/implement'\r\nimport { mapGetters } from 'vuex'\r\nimport ACol from 'ant-design-vue/es/grid/Col'\r\nimport ARow from 'ant-design-vue/es/grid/Row'\r\nimport moment from 'moment'\r\n\r\nconst columns = [\r\n  {\r\n    title: '序号',\r\n    dataIndex: 'risk_id',\r\n    scopedSlots: { customRender: 'risk_id' },\r\n    width: '10%',\r\n    align: 'center'\r\n  },\r\n  {\r\n    title: '内容',\r\n    dataIndex: 'risk_content',\r\n    width: '20%',\r\n    align: 'center'\r\n  },\r\n  {\r\n    title: '部位',\r\n    dataIndex: 'part',\r\n    width: '15%',\r\n    align: 'center'\r\n  },\r\n  {\r\n    title: '附件',\r\n    dataIndex: 'files',\r\n    scopedSlots: { customRender: 'files' },\r\n    width: '15%',\r\n    align: 'center'\r\n  },\r\n\r\n  {\r\n    title: '风险等级',\r\n    dataIndex: 'risk_rank',\r\n    width: '18%',\r\n    align: 'center'\r\n  },\r\n{\r\n    title: '检查结果',\r\n    dataIndex: 'result',\r\n    width: '18%',\r\n    align: 'center'\r\n  }]\r\n  // {\r\n  //   title: '编辑',\r\n  //   dataIndex: 'operation',\r\n  //   scopedSlots: { customRender: 'operation' },\r\n  //   align: 'center'\r\n  // }]\r\n// const columnHead = [\r\n//   {\r\n//     title: '类别',\r\n//     dataIndex: 'type',\r\n//     width: '15%',\r\n//     align: 'center'\r\n//   },\r\n//   {\r\n//     title: '职位',\r\n//     dataIndex: 'position',\r\n//     width: '18%',\r\n//     align: 'center'\r\n//   },\r\n//   {\r\n//     title: '姓名',\r\n//     dataIndex: 'name',\r\n//     width: '20%',\r\n//     align: 'center'\r\n//   },\r\n//   {\r\n//     title: '联系电话',\r\n//     dataIndex: 'phone',\r\n//     width: '25%',\r\n//     align: 'center'\r\n//   },\r\n//   {\r\n//     title: '编辑',\r\n//     dataIndex: 'operation',\r\n//     scopedSlots: { customRender: 'operation' },\r\n//     align: 'center'\r\n//   }\r\n// ]\r\nexport default {\r\n  name: 'Security',\r\n  components: {\r\n    ARow,\r\n    ACol,\r\n    SecurityModal\r\n  },\r\n  props: {\r\n    id: Number\r\n  },\r\n  data () {\r\n    return {\r\n      status: {\r\n        listLoading: true,\r\n        tableLoading: true\r\n      },\r\n      charts: '',\r\n      opinion: ['已回复', '未回复'],\r\n      opinionData: [\r\n        { value: 40, name: '已回复', itemStyle: { color: '#00b0f0' } },\r\n        { value: 60, name: '未回复', itemStyle: { color: '#7030a0' } },\r\n      ],\r\n      layout: {\r\n        'label-col': { span: 6 },\r\n        'wrapper-col': { span: 18 }\r\n      },\r\n      form: this.$form.createForm(this),\r\n      securityModal: {\r\n        record: null,\r\n        visible: false,\r\n        type: '1',\r\n        risk_id: this.id\r\n      },\r\n      columns,\r\n      matterList: [],\r\n      project_id: this.projectSelected().id,\r\n      starting_date: '',\r\n      Days: ''\r\n    }\r\n  },\r\n  mounted () {\r\n    this.$nextTick(function () {\r\n      this.drawPie('main')\r\n    })\r\n    this.getData()\r\n  },\r\n  methods: {\r\n    ...mapGetters(['projectSelected']),\r\n    getData () {\r\n      this.status.listLoading = false\r\n      this.status.tableLoading = false\r\n      api.getSecurityList(this.project_id)\r\n        .then(data => {\r\n          this.matterList = data\r\n          this.status.listLoading = false\r\n        })\r\n      api.getStartDate(this.project_id)\r\n        .then(data => {\r\n          this.status.listLoading = false\r\n          this.starting_date = data.starting_date\r\n          let today = new moment()\r\n          let starting_day = new moment(this.starting_date)\r\n          this.Days =`${today.diff(starting_day, 'days') + 1} `\r\n        })\r\n      api.getSecurityNotice(this.project_id)\r\n          .then(data => {\r\n            this.not_num = data.not_num\r\n            this.reply_num = data.reply_num\r\n            this.opinionData[0].value=this.reply_num\r\n            this.opinionData[1].value=this.not_num\r\n            this.$nextTick(function () {\r\n              this.drawPie('main')\r\n            })\r\n          })\r\n      // api.getSecurityHeadList(this.project_id)\r\n      //   .then(data => {\r\n      //     this.headList = data\r\n      //     this.status.tableLoading = false\r\n      //     console.log(1)\r\n      //   })\r\n    },\r\n    drawPie (id) {\r\n      this.charts = echarts.init(document.getElementById(id))\r\n      this.charts.setOption({\r\n        tooltip: {\r\n          trigger: 'item',\r\n        },\r\n        legend: {\r\n          orient: 'vertical',\r\n          x: 'left',\r\n          data: this.opinion\r\n        },\r\n        series: [\r\n          {\r\n            name: '数量',\r\n            type: 'pie',\r\n            radius: ['0%', '70%'],\r\n            avoidLabelOverlap: false,\r\n            label: {\r\n              normal: {\r\n                show: true,\r\n                position: 'inside'\r\n              },\r\n              emphasis: {\r\n                show: true,\r\n                textStyle: {\r\n                  fontSize: '30',\r\n                  fontWeight: 'bold'\r\n                }\r\n              }\r\n            },\r\n            labelLine: {\r\n              normal: {\r\n                show: false\r\n              }\r\n            },\r\n            data: this.opinionData\r\n          }\r\n        ]\r\n      })\r\n    },\r\n    handleSecurityClose () {\r\n      this.securityModal.type = ''\r\n      this.securityModal.record = null\r\n      this.securityModal.visible = false\r\n      this.getData()\r\n    },\r\n    handleSecurityCreate () {\r\n      this.securityModal.type = 'create'\r\n      this.securityModal.record = null\r\n      this.securityModal.visible = true\r\n    },\r\n    handleSecurityEdit (record) {\r\n      this.securityModal.type = 'edit'\r\n      this.securityModal.record = record\r\n      this.securityModal.visible = true\r\n    },\r\n    handleSecurityDelete (record) {\r\n      api.deleteSecurity(record.risk_id)\r\n        .then(data => {\r\n          this.$notification.success({ message: '成功', description: '删除成功', key: 'SUCCESS' })\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .test {\r\n    color: #c82333;\r\n  }\r\n</style>"],"sourceRoot":"src/views/implement/security"}]}