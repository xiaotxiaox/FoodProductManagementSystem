{"remainingRequest":"E:\\项目\\FoodProductManageSystem\\Frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\项目\\FoodProductManageSystem\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\项目\\FoodProductManageSystem\\Frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\项目\\FoodProductManageSystem\\Frontend\\src\\views\\detail\\GPS.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\项目\\FoodProductManageSystem\\Frontend\\src\\views\\detail\\GPS.vue","mtime":1572875471532},{"path":"E:\\项目\\FoodProductManageSystem\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\项目\\FoodProductManageSystem\\Frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\项目\\FoodProductManageSystem\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\项目\\FoodProductManageSystem\\Frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"E:\\\\\\u9879\\u76EE\\\\FoodProductManageSystem\\\\Frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapMutations } from 'vuex';\nimport { mapGetters } from 'vuex';\nimport router from '../../router';\nimport PageLayout from '../../components/page/PageLayout';\nimport api from '../../api/project';\nimport ARow from 'ant-design-vue/es/grid/Row';\nimport { BaiduMap, BmScale, BmMapType, BmNavigation, BmGeolocation, BmMarker, BmInfoWindow, BmLabel, BmLocalSearch, BmControl, BmAutoComplete } from 'vue-baidu-map/components';\nexport default {\n  name: 'GPS',\n  components: {\n    ARow: ARow,\n    PageLayout: PageLayout,\n    BaiduMap: BaiduMap,\n    BmScale: BmScale,\n    BmMapType: BmMapType,\n    BmNavigation: BmNavigation,\n    BmGeolocation: BmGeolocation,\n    BmMarker: BmMarker,\n    BmInfoWindow: BmInfoWindow,\n    BmLabel: BmLabel,\n    BmLocalSearch: BmLocalSearch,\n    BmControl: BmControl,\n    BmAutoComplete: BmAutoComplete\n  },\n  props: {\n    visible: Boolean,\n    type: String,\n    record: Object,\n    id: Number //center:Object\n\n  },\n  data: function data() {\n    return {\n      form: this.$form.createForm(this),\n      show: false,\n      keyword: '',\n      zoom: 15,\n      status: {\n        loading: true\n      },\n      center: {\n        lng: 122.1740,\n        lat: 37.2512\n      },\n      layout: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 12\n        },\n        xl: {\n          span: 6\n        }\n      },\n      projectCount: 0,\n      projectList: [],\n      mapList: null,\n      project_id: this.projectSelected().id\n    };\n  },\n  mounted: function mounted() {\n    this.getData();\n  },\n  methods: _objectSpread({}, mapGetters(['projectSelected']), {\n    getData: function getData() {\n      var _this = this;\n\n      api.getMapList(this.project_id).then(function (data) {\n        _this.mapList = data[0];\n\n        if (_this.mapList != undefined) {\n          _this.center.lng = _this.mapList.longitude;\n          _this.center.lat = _this.mapList.latitude;\n        }\n      });\n    }\n  }, mapMutations(['SET_PROJECT']), {\n    handler: function handler(_ref) {\n      var BMap = _ref.BMap,\n          map = _ref.map;\n    },\n    // addPoint(e) {\n    //   this.BMap.setMarker(e.point)\n    //   // let map = new BMap.Map()\n    //   // var point = new BMap.Point(e.point.lng,e.point.lat)\n    //   // var maker = new BMap.Marker(point)\n    //   // map.addOverlay(maker)\n    //   this.addMarker(marker)\n    //   alert(\"a\")\n    // },\n    infoWindowClose: function infoWindowClose() {\n      this.show = false;\n    },\n    infoWindowOpen: function infoWindowOpen() {\n      this.show = true;\n    },\n    //地图点击\n    getClickInfo: function getClickInfo(e) {\n      this.center.lng = e.point.lng;\n      this.center.lat = e.point.lat;\n    },\n    syncCenterAndZoom: function syncCenterAndZoom(e) {\n      var _e$target$getCenter = e.target.getCenter(),\n          lng = _e$target$getCenter.lng,\n          lat = _e$target$getCenter.lat;\n\n      this.center.lng = lng;\n      this.center.lat = lat;\n      this.zoom = e.target.getZoom();\n    },\n\n    /***\r\n     * 确认\r\n     */\n    // confirm: function () {\n    //   this.showMapComponent = false\n    //   this.$emit('map-confirm', this.center)\n    // },\n    handleOk: function handleOk() {\n      var _this2 = this;\n\n      var temp = {};\n      temp.longitude = this.center.lng;\n      temp.latitude = this.center.lat;\n\n      if (this.mapList != undefined) {\n        api.updateMapList(this.mapList.id, temp).then(function (data) {\n          _this2.$emit('close');\n\n          _this2.$notification.success({\n            message: '成功',\n            description: '修改成功',\n            key: 'SUCCESS'\n          });\n\n          console.log(temp);\n        });\n      } else {\n        api.createMapList(this.project_id, temp).then(function (data) {\n          _this2.$emit('close');\n\n          _this2.$notification.success({\n            message: '成功',\n            description: '修改成功',\n            key: 'SUCCESS'\n          });\n\n          console.log(temp);\n        });\n        this.getData();\n      }\n    },\n\n    /***\r\n     * 取消\r\n     */\n    cancel: function cancel() {\n      this.showMapComponent = false;\n      this.$emit('cancel', this.showMapComponent);\n    } // lngInit(center){\n    //   if(center.longitude){\n    //     return center.longitude\n    //   }\n    //   else{\n    //     return 116.404\n    //   }\n    // },\n    // latInit(center){\n    //   if(center.latitude){\n    //     return center.latitude\n    //   }\n    //   else{\n    //     return 39.915\n    //   }\n    // }\n\n  }),\n  computed: {\n    project: function project() {\n      return this.$store.getters.projectSelected;\n    }\n  }\n};",{"version":3,"sources":["GPS.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <div slot=\"footer\" style=\"margin-top: 0px;\">\r\n      <a-card>\r\n        <a-row :gutter=\"6\">\r\n          <a-col\r\n            class=\"item\"\r\n            :xs=\"{ span: 24 }\"\r\n            :sm=\"{ span: 8 , offset: 16 }\"\r\n            :xl=\"{ span: 4 , offset: 20 }\">\r\n            <a-button\r\n              style=\"float: right; margin-right: 10px\" @click=\"$router.go(-1)\">返回\r\n            </a-button>\r\n            <a-button type=\"primary\" style=\"float: right\" @click=\"handleOk\">保存</a-button>\r\n          </a-col>\r\n        </a-row>\r\n      </a-card>\r\n\r\n    </div>\r\n    <a-card style=\"margin-bottom: 16px;\">\r\n      <baidu-map class=\"map\" :center=\"center\" :zoom=\"zoom\" ak=\"GEhXNIBI6zKpsnemMOEVMxaUvSjQks3o\" @ready=\"handler\" @click=\"getClickInfo\"\r\n                 :scroll-wheel-zoom=\"true\" @moving=\"syncCenterAndZoom\" @moveend=\"syncCenterAndZoom\"\r\n                 @zoomend=\"syncCenterAndZoom\">\r\n        <bm-navigation anchor=\"BMAP_ANCHOR_TOP_RIGHT\"></bm-navigation>\r\n        <bm-geolocation anchor=\"BMAP_ANCHOR_BOTTOM_RIGHT\" :showAddressBar=\"true\"></bm-geolocation>\r\n        <bm-map-type :map-types=\"['BMAP_NORMAL_MAP', 'BMAP_HYBRID_MAP']\" anchor=\"BMAP_ANCHOR_BOTTOM_RIGHT\"\r\n                     offset=\"(300px,200px)\"></bm-map-type>\r\n        <bm-marker :position=\"{lng: center.lng, lat: center.lat}\" @click=\"infoWindowOpen\"\r\n                   animation=\"BMAP_ANIMATION_BOUNCE\">\r\n          <!--      <bm-label content=\"我爱北京天安门\" :labelStyle=\"{color: 'red', fontSize : '24px'}\" :offset=\"{width: -35, height: 30}\"/>-->\r\n          <bm-info-window :show=\"show\" @close=\"infoWindowClose\" @open=\"infoWindowOpen\">我爱北京天安门</bm-info-window>\r\n        </bm-marker>\r\n        <bm-control :offset=\"{width: '50px', height: '10px'}\">\r\n          <bm-auto-complete v-model=\"keyword\" :sugStyle=\"{zIndex: 1}\">\r\n            <a-input-search\r\n              placeholder=\"请输入文字\"\r\n              style=\"width: 200px\"\r\n            />\r\n          </bm-auto-complete>\r\n        </bm-control>\r\n        <bm-local-search :keyword=\"keyword\" :auto-viewport=\"true\"></bm-local-search>\r\n      </baidu-map>\r\n    </a-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapMutations } from 'vuex'\r\nimport { mapGetters } from 'vuex'\r\nimport router from '../../router'\r\nimport PageLayout from '../../components/page/PageLayout'\r\nimport api from '../../api/project'\r\nimport ARow from 'ant-design-vue/es/grid/Row'\r\nimport {\r\n  BaiduMap, BmScale, BmMapType, BmNavigation, BmGeolocation, BmMarker, BmInfoWindow, BmLabel,\r\n  BmLocalSearch, BmControl, BmAutoComplete,\r\n} from 'vue-baidu-map/components'\r\n\r\nexport default {\r\n  name: 'GPS',\r\n  components: {\r\n    ARow,\r\n    PageLayout,\r\n    BaiduMap,\r\n    BmScale,\r\n    BmMapType,\r\n    BmNavigation,\r\n    BmGeolocation,\r\n    BmMarker,\r\n    BmInfoWindow,\r\n    BmLabel,\r\n    BmLocalSearch,\r\n    BmControl,\r\n    BmAutoComplete\r\n  },\r\n  props: {\r\n    visible: Boolean,\r\n    type: String,\r\n    record: Object,\r\n    id: Number\r\n    //center:Object\r\n  },\r\n  data () {\r\n    return {\r\n      form: this.$form.createForm(this),\r\n      show: false,\r\n      keyword: '',\r\n      zoom: 15,\r\n      status: {\r\n        loading: true\r\n      },\r\n      center: { lng: 122.1740, lat: 37.2512 },\r\n      layout: {\r\n        xs: { span: 24 },\r\n        sm: { span: 12 },\r\n        xl: { span: 6 }\r\n      },\r\n      projectCount: 0,\r\n      projectList: [],\r\n      mapList: null,\r\n      project_id: this.projectSelected().id,\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getData()\r\n  },\r\n  methods: {\r\n    ...mapGetters(['projectSelected']),\r\n    getData () {\r\n      api.getMapList(this.project_id)\r\n        .then(data => {\r\n          this.mapList = data[0]\r\n          if (this.mapList != undefined) {\r\n            this.center.lng = this.mapList.longitude\r\n            this.center.lat = this.mapList.latitude\r\n          }\r\n        })\r\n    },\r\n    ...mapMutations(['SET_PROJECT']),\r\n    handler ({ BMap, map }) {\r\n    },\r\n    // addPoint(e) {\r\n    //   this.BMap.setMarker(e.point)\r\n    //   // let map = new BMap.Map()\r\n    //   // var point = new BMap.Point(e.point.lng,e.point.lat)\r\n    //   // var maker = new BMap.Marker(point)\r\n    //   // map.addOverlay(maker)\r\n    //   this.addMarker(marker)\r\n    //   alert(\"a\")\r\n    // },\r\n    infoWindowClose () {\r\n      this.show = false\r\n    },\r\n    infoWindowOpen () {\r\n      this.show = true\r\n    },\r\n    //地图点击\r\n    getClickInfo (e) {\r\n      this.center.lng = e.point.lng\r\n      this.center.lat = e.point.lat\r\n    },\r\n    syncCenterAndZoom (e) {\r\n      const { lng, lat } = e.target.getCenter()\r\n      this.center.lng = lng\r\n      this.center.lat = lat\r\n      this.zoom = e.target.getZoom()\r\n    },\r\n    /***\r\n     * 确认\r\n     */\r\n    // confirm: function () {\r\n    //   this.showMapComponent = false\r\n    //   this.$emit('map-confirm', this.center)\r\n    // },\r\n    handleOk () {\r\n      var temp={}\r\n      temp.longitude=this.center.lng\r\n      temp.latitude=this.center.lat\r\n      if(this.mapList!=undefined){\r\n        api.updateMapList(this.mapList.id, temp)\r\n        .then(data => {\r\n          this.$emit('close')\r\n          this.$notification.success({ message: '成功', description: '修改成功', key: 'SUCCESS' })\r\n          console.log(temp)\r\n        })\r\n      }\r\n      else{\r\n        api.createMapList(this.project_id, temp)\r\n        .then(data => {\r\n          this.$emit('close')\r\n          this.$notification.success({ message: '成功', description: '修改成功', key: 'SUCCESS' })\r\n          console.log(temp)\r\n        })\r\n        this.getData()\r\n      }\r\n\r\n    },\r\n    /***\r\n     * 取消\r\n     */\r\n    cancel: function () {\r\n      this.showMapComponent = false\r\n      this.$emit('cancel', this.showMapComponent)\r\n    },\r\n    // lngInit(center){\r\n    //   if(center.longitude){\r\n    //     return center.longitude\r\n    //   }\r\n    //   else{\r\n    //     return 116.404\r\n    //   }\r\n    // },\r\n    // latInit(center){\r\n    //   if(center.latitude){\r\n    //     return center.latitude\r\n    //   }\r\n    //   else{\r\n    //     return 39.915\r\n    //   }\r\n    // }\r\n  },\r\n  computed: {\r\n    project () {\r\n      return this.$store.getters.projectSelected\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  @import '~ant-design-vue/es/style/themes/default';\r\n\r\n  .map {\r\n    width: 100%;\r\n    height: 240px;\r\n  }\r\n\r\n</style>\r\n"],"sourceRoot":"src/views/detail"}]}